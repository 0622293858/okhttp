<HTML>
<HEAD>
<meta charset="UTF-8">
<title>WebSocket - okhttp</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">okhttp</a>&nbsp;/&nbsp;<a href="../index.html">okhttp3</a>&nbsp;/&nbsp;<a href="./index.html">WebSocket</a><br/>
<br/>
<h1>WebSocket</h1>
<code><span class="keyword">interface </span><span class="identifier">WebSocket</span></code>
<p>A non-blocking interface to a web socket. Use the <a href="-factory/index.html">factory</a> to create
instances; usually this is <a href="../-ok-http-client/index.html">OkHttpClient</a>.</p>
<h2>Web Socket Lifecycle</h2>
<p>Upon normal operation each web socket progresses through a sequence of states:</p>
<ul><li><strong>Connecting:</strong> the initial state of each web socket. Messages may be enqueued but they won't
    be transmitted until the web socket is open.</li>

<li><strong>Open:</strong> the web socket has been accepted by the remote peer and is fully operational.
    Messages in either direction are enqueued for immediate transmission.</li>

<li><strong>Closing:</strong> one of the peers on the web socket has initiated a graceful shutdown. The web
    socket will continue to transmit already-enqueued messages but will refuse to enqueue new
    ones.</li>

<li><strong>Closed:</strong> the web socket has transmitted all of its messages and has received all messages
    from the peer.</li>
</ul>
<p>Web sockets may fail due to HTTP upgrade problems, connectivity problems, or if either peer
chooses to short-circuit the graceful shutdown process:</p>
<ul><li><strong>Canceled:</strong> the web socket connection failed. Messages that were successfully enqueued by
    either peer may not have been transmitted to the other.</li>
</ul>
<p>Note that the state progression is independent for each peer. Arriving at a gracefully-closed
state indicates that a peer has sent all of its outgoing messages and received all of its
incoming messages. But it does not guarantee that the other peer will successfully receive all of
its incoming messages.</p>
<h3>Types</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="-factory/index.html">Factory</a></p>
</td>
<td>
<code><span class="keyword">interface </span><span class="identifier">Factory</span></code></td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="cancel.html">cancel</a></p>
</td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">cancel</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Immediately and violently release resources held by this web socket, discarding any enqueued
messages. This does nothing if the web socket has already been closed or canceled.</p>
</td>
</tr>
<tr>
<td>
<p><a href="close.html">close</a></p>
</td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">close</span><span class="symbol">(</span><span class="identifier" id="okhttp3.WebSocket$close(kotlin.Int, kotlin.String)/code">code</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a><span class="symbol">, </span><span class="identifier" id="okhttp3.WebSocket$close(kotlin.Int, kotlin.String)/reason">reason</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">?</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a></code>
<p>Attempts to initiate a graceful shutdown of this web socket. Any already-enqueued messages will
be transmitted before the close message is sent but subsequent calls to <a href="send.html">send</a> will return
false and their messages will not be enqueued.</p>
</td>
</tr>
<tr>
<td>
<p><a href="queue-size.html">queueSize</a></p>
</td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">queueSize</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html"><span class="identifier">Long</span></a></code>
<p>Returns the size in bytes of all messages enqueued to be transmitted to the server. This
doesn't include framing overhead. It also doesn't include any bytes buffered by the operating
system or network intermediaries. This method returns 0 if no messages are waiting in the
queue. If may return a nonzero value after the web socket has been canceled; this indicates
that enqueued messages were not transmitted.</p>
</td>
</tr>
<tr>
<td>
<p><a href="request.html">request</a></p>
</td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">request</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="../-request/index.html"><span class="identifier">Request</span></a></code>
<p>Returns the original request that initiated this web socket.</p>
</td>
</tr>
<tr>
<td>
<p><a href="send.html">send</a></p>
</td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">send</span><span class="symbol">(</span><span class="identifier" id="okhttp3.WebSocket$send(kotlin.String)/text">text</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a></code>
<p>Attempts to enqueue <code>text</code> to be UTF-8 encoded and sent as a the data of a text (type <code>0x1</code>)
message.</p>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">send</span><span class="symbol">(</span><span class="identifier" id="okhttp3.WebSocket$send(okio.ByteString)/bytes">bytes</span><span class="symbol">:</span>&nbsp;<a href="https://square.github.io/okio/2.x/okio/jvm/okio/-byte-string/index.html"><span class="identifier">ByteString</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a></code>
<p>Attempts to enqueue <code>bytes</code> to be sent as a the data of a binary (type <code>0x2</code>) message.</p>
</td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
