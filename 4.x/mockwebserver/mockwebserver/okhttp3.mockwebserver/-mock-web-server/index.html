<HTML>
<HEAD>
<meta charset="UTF-8">
<title>MockWebServer - mockwebserver</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">mockwebserver</a>&nbsp;/&nbsp;<a href="../index.html">okhttp3.mockwebserver</a>&nbsp;/&nbsp;<a href="./index.html">MockWebServer</a><br/>
<br/>
<h1>MockWebServer</h1>
<code><span class="keyword">class </span><span class="identifier">MockWebServer</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">ExternalResource</span><span class="symbol">, </span><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html"><span class="identifier">Closeable</span></a></code>
<p>A scriptable web server. Callers supply canned responses and the server replays them upon request in sequence.</p>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="-init-.html">&lt;init&gt;</a></p>
</td>
<td>
<code><span class="identifier">MockWebServer</span><span class="symbol">(</span><span class="symbol">)</span></code>
<p>A scriptable web server. Callers supply canned responses and the server replays them upon request in sequence.</p>
</td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="after.html">after</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">after</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="before.html">before</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">before</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="close.html">close</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">close</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="enqueue.html">enqueue</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">enqueue</span><span class="symbol">(</span><span class="identifier" id="okhttp3.mockwebserver.MockWebServer$enqueue(okhttp3.mockwebserver.MockResponse)/response">response</span><span class="symbol">:</span>&nbsp;<a href="../-mock-response/index.html"><span class="identifier">MockResponse</span></a><span class="symbol">!</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Scripts <code>response</code> to be returned to a request made in sequence. The first request is served by the first enqueued response; the second request by the second enqueued response; and so on.</p>
</td>
</tr>
<tr>
<td>
<p><a href="get-dispatcher.html">getDispatcher</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">getDispatcher</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="../-dispatcher/index.html"><span class="identifier">Dispatcher</span></a><span class="symbol">!</span></code>
<p>Returns the dispatcher used to respond to HTTP requests. The default dispatcher is a but other dispatchers can be configured.</p>
</td>
</tr>
<tr>
<td>
<p><a href="get-host-name.html">getHostName</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">getHostName</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">!</span></code></td>
</tr>
<tr>
<td>
<p><a href="get-port.html">getPort</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">getPort</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="get-request-count.html">getRequestCount</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">getRequestCount</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a></code>
<p>Returns the number of HTTP requests received thus far by this server. This may exceed the number of HTTP connections when connection reuse is in practice.</p>
</td>
</tr>
<tr>
<td>
<p><a href="no-client-auth.html">noClientAuth</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">noClientAuth</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Configure the server to not perform SSL authentication of the client. This leaves authentication to another layer such as in an HTTP cookie or header. This is the default and most common configuration.</p>
</td>
</tr>
<tr>
<td>
<p><a href="protocols.html">protocols</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">protocols</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-list/index.html"><span class="identifier">MutableList</span></a><span class="symbol">&lt;</span><span class="identifier">Protocol</span><span class="symbol">!</span><span class="symbol">&gt;</span><span class="symbol">!</span></code></td>
</tr>
<tr>
<td>
<p><a href="request-client-auth.html">requestClientAuth</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">requestClientAuth</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Configure the server to <a href="https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/SSLSocket.html#setWantClientAuth(boolean)">want client auth</a>. If the client presents a certificate that is <a href="https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/TrustManager.html">trusted</a> the handshake will proceed normally. The connection will also proceed normally if the client presents no certificate at all! But if the client presents an untrusted certificate the handshake will fail and no connection will be established.</p>
</td>
</tr>
<tr>
<td>
<p><a href="require-client-auth.html">requireClientAuth</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">requireClientAuth</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Configure the server to <a href="https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/SSLSocket.html#setNeedClientAuth(boolean)">need client auth</a>. If the client presents a certificate that is <a href="https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/TrustManager.html">trusted</a> the handshake will proceed normally. If the client presents an untrusted certificate or no certificate at all the handshake will fail and no connection will be established.</p>
</td>
</tr>
<tr>
<td>
<p><a href="set-body-limit.html">setBodyLimit</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">setBodyLimit</span><span class="symbol">(</span><span class="identifier" id="okhttp3.mockwebserver.MockWebServer$setBodyLimit(kotlin.Long)/maxBodyLength">maxBodyLength</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html"><span class="identifier">Long</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Sets the number of bytes of the POST body to keep in memory to the given limit.</p>
</td>
</tr>
<tr>
<td>
<p><a href="set-dispatcher.html">setDispatcher</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">setDispatcher</span><span class="symbol">(</span><span class="identifier" id="okhttp3.mockwebserver.MockWebServer$setDispatcher(okhttp3.mockwebserver.Dispatcher)/dispatcher">dispatcher</span><span class="symbol">:</span>&nbsp;<a href="../-dispatcher/index.html"><span class="identifier">Dispatcher</span></a><span class="symbol">!</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Sets the dispatcher used to match incoming requests to mock responses. The default dispatcher simply serves a fixed sequence of responses from a <code><a href="enqueue.html">queue</a></code>; custom dispatchers can vary the response based on timing or the content of the request.</p>
</td>
</tr>
<tr>
<td>
<p><a href="set-protocol-negotiation-enabled.html">setProtocolNegotiationEnabled</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">setProtocolNegotiationEnabled</span><span class="symbol">(</span><span class="identifier" id="okhttp3.mockwebserver.MockWebServer$setProtocolNegotiationEnabled(kotlin.Boolean)/protocolNegotiationEnabled">protocolNegotiationEnabled</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Sets whether ALPN is used on incoming HTTPS connections to negotiate a protocol like HTTP/1.1 or HTTP/2. Call this method to disable negotiation and restrict connections to HTTP/1.1.</p>
</td>
</tr>
<tr>
<td>
<p><a href="set-protocols.html">setProtocols</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">setProtocols</span><span class="symbol">(</span><span class="identifier" id="okhttp3.mockwebserver.MockWebServer$setProtocols(kotlin.collections.MutableList((okhttp3.Protocol)))/protocols">protocols</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-list/index.html"><span class="identifier">MutableList</span></a><span class="symbol">&lt;</span><span class="identifier">Protocol</span><span class="symbol">!</span><span class="symbol">&gt;</span><span class="symbol">!</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Indicates the protocols supported by ALPN on incoming HTTPS connections. This list is ignored when <code><a href="set-protocol-negotiation-enabled.html">negotiation is disabled</a></code>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="set-server-socket-factory.html">setServerSocketFactory</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">setServerSocketFactory</span><span class="symbol">(</span><span class="identifier" id="okhttp3.mockwebserver.MockWebServer$setServerSocketFactory(javax.net.ServerSocketFactory)/serverSocketFactory">serverSocketFactory</span><span class="symbol">:</span>&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/javax/net/ServerSocketFactory.html"><span class="identifier">ServerSocketFactory</span></a><span class="symbol">!</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="shutdown.html">shutdown</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">shutdown</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="start.html">start</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">start</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Equivalent to <code>start(0)</code>.</p>
<code><span class="keyword">fun </span><span class="identifier">start</span><span class="symbol">(</span><span class="identifier" id="okhttp3.mockwebserver.MockWebServer$start(kotlin.Int)/port">port</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Starts the server on the loopback interface for the given port.</p>
<code><span class="keyword">fun </span><span class="identifier">start</span><span class="symbol">(</span><span class="identifier" id="okhttp3.mockwebserver.MockWebServer$start(java.net.InetAddress, kotlin.Int)/inetAddress">inetAddress</span><span class="symbol">:</span>&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html"><span class="identifier">InetAddress</span></a><span class="symbol">!</span><span class="symbol">, </span><span class="identifier" id="okhttp3.mockwebserver.MockWebServer$start(java.net.InetAddress, kotlin.Int)/port">port</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Starts the server on the given address and port.</p>
</td>
</tr>
<tr>
<td>
<p><a href="take-request.html">takeRequest</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">takeRequest</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="../-recorded-request/index.html"><span class="identifier">RecordedRequest</span></a><span class="symbol">!</span></code>
<p>Awaits the next HTTP request, removes it, and returns it. Callers should use this to verify the request was sent as intended. This method will block until the request is available, possibly forever.</p>
<code><span class="keyword">fun </span><span class="identifier">takeRequest</span><span class="symbol">(</span><span class="identifier" id="okhttp3.mockwebserver.MockWebServer$takeRequest(kotlin.Long, java.util.concurrent.TimeUnit)/timeout">timeout</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html"><span class="identifier">Long</span></a><span class="symbol">, </span><span class="identifier" id="okhttp3.mockwebserver.MockWebServer$takeRequest(kotlin.Long, java.util.concurrent.TimeUnit)/unit">unit</span><span class="symbol">:</span>&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html"><span class="identifier">TimeUnit</span></a><span class="symbol">!</span><span class="symbol">)</span><span class="symbol">: </span><a href="../-recorded-request/index.html"><span class="identifier">RecordedRequest</span></a><span class="symbol">!</span></code>
<p>Awaits the next HTTP request (waiting up to the specified wait time if necessary), removes it, and returns it. Callers should use this to verify the request was sent as intended within the given time.</p>
</td>
</tr>
<tr>
<td>
<p><a href="to-proxy-address.html">toProxyAddress</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">toProxyAddress</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://docs.oracle.com/javase/8/docs/api/java/net/Proxy.html"><span class="identifier">Proxy</span></a><span class="symbol">!</span></code></td>
</tr>
<tr>
<td>
<p><a href="to-string.html">toString</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">toString</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="url.html">url</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">url</span><span class="symbol">(</span><span class="identifier" id="okhttp3.mockwebserver.MockWebServer$url(kotlin.String)/path">path</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">!</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">HttpUrl</span><span class="symbol">!</span></code>
<p>Returns a URL for connecting to this server.</p>
</td>
</tr>
<tr>
<td>
<p><a href="use-https.html">useHttps</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">useHttps</span><span class="symbol">(</span><span class="identifier" id="okhttp3.mockwebserver.MockWebServer$useHttps(javax.net.ssl.SSLSocketFactory, kotlin.Boolean)/sslSocketFactory">sslSocketFactory</span><span class="symbol">:</span>&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/SSLSocketFactory.html"><span class="identifier">SSLSocketFactory</span></a><span class="symbol">!</span><span class="symbol">, </span><span class="identifier" id="okhttp3.mockwebserver.MockWebServer$useHttps(javax.net.ssl.SSLSocketFactory, kotlin.Boolean)/tunnelProxy">tunnelProxy</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Serve requests with HTTPS rather than otherwise.</p>
</td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
