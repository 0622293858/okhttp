<HTML>
<HEAD>
<meta charset="UTF-8">
<title>HeldCertificate - okhttp-tls</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">okhttp-tls</a>&nbsp;/&nbsp;<a href="../index.html">okhttp3.tls</a>&nbsp;/&nbsp;<a href="./index.html">HeldCertificate</a><br/>
<br/>
<h1>HeldCertificate</h1>
<code><span class="keyword">class </span><span class="identifier">HeldCertificate</span></code>
<p>A certificate and its private key. These are some properties of certificates that are used with
TLS:</p>
<ul><li><strong>A common name.</strong> This is a string identifier for the certificate. It usually describes the
    purpose of the certificate like "Entrust Root Certification Authority - G2" or
    "www.squareup.com".</li>

<li><strong>A set of hostnames.</strong> These are in the certificate's subject alternative name (SAN)
    extension. A subject alternative name is either a literal hostname (<code>squareup.com</code>), a literal
    IP address (<code>74.122.190.80</code>), or a hostname pattern (<code>*.api.squareup.com</code>).</li>

<li><strong>A validity interval.</strong> A certificate should not be used before its validity interval starts
    or after it ends.</li>

<li><strong>A public key.</strong> This cryptographic key is used for asymmetric encryption digital signatures.
    Note that the private key is not a part of the certificate!</li>

<li><strong>A signature issued by another certificate's private key.</strong> This mechanism allows a trusted
    third-party to endorse a certificate. Third parties should only endorse certificates once
    they've confirmed that the owner of the private key is also the owner of the certificate's
    other properties.</li>
</ul>
<p>Certificates are signed by other certificates and a sequence of them is called a certificate
chain. The chain terminates in a self-signed "root" certificate. Signing certificates in the
middle of the chain are called "intermediates". Organizations that offer certificate signing are
called certificate authorities (CAs).</p>
<p>Browsers and other HTTP clients need a set of trusted root certificates to authenticate their
peers. Sets of root certificates are managed by either the HTTP client (like Firefox), or the
host platform (like Android). In July 2018 Android had 134 trusted root certificates for its HTTP
clients to trust.</p>
<p>For example, in order to establish a secure connection to <code>https://www.squareup.com/</code>,
these three certificates are used.</p>
<pre><code>www.squareup.com certificate:

Common Name: www.squareup.com
Subject Alternative Names: www.squareup.com, squareup.com, account.squareup.com...
Validity: 2018-07-03T20:18:17Z – 2019-08-01T20:48:15Z
Public Key: d107beecc17325f55da976bcbab207ba4df68bd3f8fce7c3b5850311128264fd53e1baa342f58d93...
Signature: 1fb0e66fac05322721fe3a3917f7c98dee1729af39c99eab415f22d8347b508acdf0bab91781c3720...

signed by intermediate certificate:

Common Name: Entrust Certification Authority - L1M
Subject Alternative Names: none
Validity: 2014-12-15T15:25:03Z – 2030-10-15T15:55:03Z
Public Key: d081c13923c2b1d1ecf757dd55243691202248f7fcca520ab0ab3f33b5b08407f6df4e7ab0fb9822...
Signature: b487c784221a29c0a478ecf54f1bb484976f77eed4cf59afa843962f1d58dea6f3155b2ed9439c4c4...

signed by root certificate:

Common Name: Entrust Root Certification Authority - G2
Subject Alternative Names: none
Validity: 2009-07-07T17:25:54Z – 2030-12-07T17:55:54Z
Public Key: ba84b672db9e0c6be299e93001a776ea32b895411ac9da614e5872cffef68279bf7361060aa527d8...
Self-signed Signature: 799f1d96c6b6793f228d87d3870304606a6b9a2e59897311ac43d1f513ff8d392bc0f...
</code></pre>
<p>In this example the HTTP client already knows and trusts the last certificate, "Entrust Root
Certification Authority - G2". That certificate is used to verify the signature of the
intermediate certificate, "Entrust Certification Authority - L1M". The intermediate certificate
is used to verify the signature of the "www.squareup.com" certificate.</p>
<p>This roles are reversed for client authentication. In that case the client has a private key and
a chain of certificates. The server uses a set of trusted root certificates to authenticate the
client. Subject alternative names are not used for client authentication.</p>
<h3>Types</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="-builder/index.html">Builder</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">Builder</span></code>
<p>Build a held certificate with reasonable defaults.</p>
</td>
</tr>
</tbody>
</table>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="-init-.html">&lt;init&gt;</a></p>
</td>
<td>
<code><span class="identifier">HeldCertificate</span><span class="symbol">(</span><span class="identifier" id="okhttp3.tls.HeldCertificate$<init>(java.security.KeyPair, java.security.cert.X509Certificate)/keyPair">keyPair</span><span class="symbol">:</span>&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/security/KeyPair.html"><span class="identifier">KeyPair</span></a><span class="symbol">, </span><span class="identifier" id="okhttp3.tls.HeldCertificate$<init>(java.security.KeyPair, java.security.cert.X509Certificate)/certificate">certificate</span><span class="symbol">:</span>&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/security/cert/X509Certificate.html"><span class="identifier">X509Certificate</span></a><span class="symbol">)</span></code>
<p>A certificate and its private key. These are some properties of certificates that are used with
TLS:</p>
</td>
</tr>
</tbody>
</table>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="certificate.html">certificate</a></p>
</td>
<td>
<code><span class="keyword">val </span><span class="identifier">certificate</span><span class="symbol">: </span><a href="https://docs.oracle.com/javase/8/docs/api/java/security/cert/X509Certificate.html"><span class="identifier">X509Certificate</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="key-pair.html">keyPair</a></p>
</td>
<td>
<code><span class="keyword">val </span><span class="identifier">keyPair</span><span class="symbol">: </span><a href="https://docs.oracle.com/javase/8/docs/api/java/security/KeyPair.html"><span class="identifier">KeyPair</span></a></code></td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="certificate-pem.html">certificatePem</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">certificatePem</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a></code>
<p>Returns the certificate encoded in <a href="https://tools.ietf.org/html/rfc7468">PEM format</a>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="private-key-pkcs1-pem.html">privateKeyPkcs1Pem</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">privateKeyPkcs1Pem</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a></code>
<p>Returns the RSA private key encoded in <a href="https://tools.ietf.org/html/rfc8017">PKCS #1</a> <a href="https://tools.ietf.org/html/rfc7468">PEM format</a>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="private-key-pkcs8-pem.html">privateKeyPkcs8Pem</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">privateKeyPkcs8Pem</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a></code>
<p>Returns the RSA private key encoded in <a href="https://tools.ietf.org/html/rfc5208">PKCS #8</a> <a href="https://tools.ietf.org/html/rfc7468">PEM format</a>.</p>
</td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
