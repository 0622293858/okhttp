



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="An HTTP & HTTP/2 client for Android and Java applications">
      
      
      
        <meta name="author" content="Square, Inc.">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Change Log - OkHttp</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#009688">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../css/app.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="white">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#change-log" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="OkHttp" class="md-header-nav__button md-logo">
          
            <img src="../images/icon-square.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              OkHttp
            </span>
            <span class="md-header-nav__topic">
              
                Change Log
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/square/okhttp/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    OkHttp
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="OkHttp" class="md-nav__button md-logo">
      
        <img src="../images/icon-square.png" width="48" height="48">
      
    </a>
    OkHttp
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/square/okhttp/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    OkHttp
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../calls/" title="Calls" class="md-nav__link">
      Calls
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../connections/" title="Connections" class="md-nav__link">
      Connections
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../recipes/" title="Recipes" class="md-nav__link">
      Recipes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../interceptors/" title="Interceptors" class="md-nav__link">
      Interceptors
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../https/" title="HTTPS" class="md-nav__link">
      HTTPS
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../events/" title="Events" class="md-nav__link">
      Events
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../works_with_okhttp/" title="Works with OkHttp" class="md-nav__link">
      Works with OkHttp
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://stackoverflow.com/questions/tagged/okhttp?sort=active" title="Stack Overflow ⏏" class="md-nav__link">
      Stack Overflow ⏏
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      4.x API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        4.x API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../4.x/okhttp/okhttp3/" title="okhttp" class="md-nav__link">
      okhttp
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4.x/okhttp-dnsoverhttps/okhttp3.dnsoverhttps/" title="dnsoverhttps" class="md-nav__link">
      dnsoverhttps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4.x/okhttp-logging-interceptor/okhttp3.logging/" title="logging-interceptor" class="md-nav__link">
      logging-interceptor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4.x/okhttp-sse/okhttp3.sse/" title="sse" class="md-nav__link">
      sse
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4.x/okhttp-tls/okhttp3.tls/" title="tls" class="md-nav__link">
      tls
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4.x/okhttp-urlconnection/okhttp3/" title="urlconnection" class="md-nav__link">
      urlconnection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4.x/mockwebserver/okhttp3.mockwebserver/" title="mockwebserver" class="md-nav__link">
      mockwebserver
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      3.x API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        3.x API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="https://square.github.io/okhttp/3.x/okhttp/" title="okhttp ⏏" class="md-nav__link">
      okhttp ⏏
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://square.github.io/okhttp/3.x/okhttp-dnsoverhttps/" title="dnsoverhttps ⏏" class="md-nav__link">
      dnsoverhttps ⏏
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://square.github.io/okhttp/3.x/logging-interceptor/" title="logging-interceptor ⏏" class="md-nav__link">
      logging-interceptor ⏏
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://square.github.io/okhttp/3.x/okhttp-sse/" title="sse ⏏" class="md-nav__link">
      sse ⏏
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://square.github.io/okhttp/3.x/okhttp-tls/" title="tls ⏏" class="md-nav__link">
      tls ⏏
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://square.github.io/okhttp/3.x/okhttp-urlconnection/" title="urlconnection ⏏" class="md-nav__link">
      urlconnection ⏏
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://square.github.io/okhttp/3.x/mockwebserver/" title="mockwebserver ⏏" class="md-nav__link">
      mockwebserver ⏏
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Change Log
      </label>
    
    <a href="./" title="Change Log" class="md-nav__link md-nav__link--active">
      Change Log
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#version-400-rc2" title="Version 4.0.0-RC2" class="md-nav__link">
    Version 4.0.0-RC2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-400-rc1" title="Version 4.0.0-RC1" class="md-nav__link">
    Version 4.0.0-RC1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3142" title="Version 3.14.2" class="md-nav__link">
    Version 3.14.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3123" title="Version 3.12.3" class="md-nav__link">
    Version 3.12.3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3141" title="Version 3.14.1" class="md-nav__link">
    Version 3.14.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3140" title="Version 3.14.0" class="md-nav__link">
    Version 3.14.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3122" title="Version 3.12.2" class="md-nav__link">
    Version 3.12.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3131" title="Version 3.13.1" class="md-nav__link">
    Version 3.13.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3130" title="Version 3.13.0" class="md-nav__link">
    Version 3.13.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3121" title="Version 3.12.1" class="md-nav__link">
    Version 3.12.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3120" title="Version 3.12.0" class="md-nav__link">
    Version 3.12.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3110" title="Version 3.11.0" class="md-nav__link">
    Version 3.11.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3100" title="Version 3.10.0" class="md-nav__link">
    Version 3.10.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-391" title="Version 3.9.1" class="md-nav__link">
    Version 3.9.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-390" title="Version 3.9.0" class="md-nav__link">
    Version 3.9.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-381" title="Version 3.8.1" class="md-nav__link">
    Version 3.8.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-380" title="Version 3.8.0" class="md-nav__link">
    Version 3.8.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-370" title="Version 3.7.0" class="md-nav__link">
    Version 3.7.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-360" title="Version 3.6.0" class="md-nav__link">
    Version 3.6.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-350" title="Version 3.5.0" class="md-nav__link">
    Version 3.5.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-342" title="Version 3.4.2" class="md-nav__link">
    Version 3.4.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-341" title="Version 3.4.1" class="md-nav__link">
    Version 3.4.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-340" title="Version 3.4.0" class="md-nav__link">
    Version 3.4.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-340-rc1" title="Version 3.4.0-RC1" class="md-nav__link">
    Version 3.4.0-RC1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-331" title="Version 3.3.1" class="md-nav__link">
    Version 3.3.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-330" title="Version 3.3.0" class="md-nav__link">
    Version 3.3.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-320" title="Version 3.2.0" class="md-nav__link">
    Version 3.2.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-312" title="Version 3.1.2" class="md-nav__link">
    Version 3.1.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-311" title="Version 3.1.1" class="md-nav__link">
    Version 3.1.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-310" title="Version 3.1.0" class="md-nav__link">
    Version 3.1.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-301" title="Version 3.0.1" class="md-nav__link">
    Version 3.0.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-300" title="Version 3.0.0" class="md-nav__link">
    Version 3.0.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-300-rc1" title="Version 3.0.0-RC1" class="md-nav__link">
    Version 3.0.0-RC1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-275" title="Version 2.7.5" class="md-nav__link">
    Version 2.7.5
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-274" title="Version 2.7.4" class="md-nav__link">
    Version 2.7.4
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-273" title="Version 2.7.3" class="md-nav__link">
    Version 2.7.3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-272" title="Version 2.7.2" class="md-nav__link">
    Version 2.7.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-271" title="Version 2.7.1" class="md-nav__link">
    Version 2.7.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-270" title="Version 2.7.0" class="md-nav__link">
    Version 2.7.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-260" title="Version 2.6.0" class="md-nav__link">
    Version 2.6.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-250" title="Version 2.5.0" class="md-nav__link">
    Version 2.5.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-240" title="Version 2.4.0" class="md-nav__link">
    Version 2.4.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-240-rc1" title="Version 2.4.0-RC1" class="md-nav__link">
    Version 2.4.0-RC1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-230" title="Version 2.3.0" class="md-nav__link">
    Version 2.3.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-220" title="Version 2.2.0" class="md-nav__link">
    Version 2.2.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-210" title="Version 2.1.0" class="md-nav__link">
    Version 2.1.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-210-rc1" title="Version 2.1.0-RC1" class="md-nav__link">
    Version 2.1.0-RC1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-200" title="Version 2.0.0" class="md-nav__link">
    Version 2.0.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-200-rc2" title="Version 2.0.0-RC2" class="md-nav__link">
    Version 2.0.0-RC2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-200-rc1" title="Version 2.0.0-RC1" class="md-nav__link">
    Version 2.0.0-RC1
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api-changes" title="API Changes" class="md-nav__link">
    API Changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-changes" title="Implementation changes" class="md-nav__link">
    Implementation changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-160" title="Version 1.6.0" class="md-nav__link">
    Version 1.6.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-154" title="Version 1.5.4" class="md-nav__link">
    Version 1.5.4
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-153" title="Version 1.5.3" class="md-nav__link">
    Version 1.5.3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-152" title="Version 1.5.2" class="md-nav__link">
    Version 1.5.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-151" title="Version 1.5.1" class="md-nav__link">
    Version 1.5.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-150" title="Version 1.5.0" class="md-nav__link">
    Version 1.5.0
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#okhttp-no-longer-uses-the-default-ssl-context" title="OkHttp no longer uses the default SSL context." class="md-nav__link">
    OkHttp no longer uses the default SSL context.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synthetic-headers-have-changed" title="Synthetic headers have changed" class="md-nav__link">
    Synthetic headers have changed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changes" title="Changes" class="md-nav__link">
    Changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-130" title="Version 1.3.0" class="md-nav__link">
    Version 1.3.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-121" title="Version 1.2.1" class="md-nav__link">
    Version 1.2.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-120" title="Version 1.2.0" class="md-nav__link">
    Version 1.2.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-111" title="Version 1.1.1" class="md-nav__link">
    Version 1.1.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-110" title="Version 1.1.0" class="md-nav__link">
    Version 1.1.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-102" title="Version 1.0.2" class="md-nav__link">
    Version 1.0.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-101" title="Version 1.0.1" class="md-nav__link">
    Version 1.0.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-100" title="Version 1.0.0" class="md-nav__link">
    Version 1.0.0
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../upgrading_to_okhttp_4/" title="Upgrading to OkHttp 4" class="md-nav__link">
      Upgrading to OkHttp 4
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#version-400-rc2" title="Version 4.0.0-RC2" class="md-nav__link">
    Version 4.0.0-RC2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-400-rc1" title="Version 4.0.0-RC1" class="md-nav__link">
    Version 4.0.0-RC1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3142" title="Version 3.14.2" class="md-nav__link">
    Version 3.14.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3123" title="Version 3.12.3" class="md-nav__link">
    Version 3.12.3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3141" title="Version 3.14.1" class="md-nav__link">
    Version 3.14.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3140" title="Version 3.14.0" class="md-nav__link">
    Version 3.14.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3122" title="Version 3.12.2" class="md-nav__link">
    Version 3.12.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3131" title="Version 3.13.1" class="md-nav__link">
    Version 3.13.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3130" title="Version 3.13.0" class="md-nav__link">
    Version 3.13.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3121" title="Version 3.12.1" class="md-nav__link">
    Version 3.12.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3120" title="Version 3.12.0" class="md-nav__link">
    Version 3.12.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3110" title="Version 3.11.0" class="md-nav__link">
    Version 3.11.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-3100" title="Version 3.10.0" class="md-nav__link">
    Version 3.10.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-391" title="Version 3.9.1" class="md-nav__link">
    Version 3.9.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-390" title="Version 3.9.0" class="md-nav__link">
    Version 3.9.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-381" title="Version 3.8.1" class="md-nav__link">
    Version 3.8.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-380" title="Version 3.8.0" class="md-nav__link">
    Version 3.8.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-370" title="Version 3.7.0" class="md-nav__link">
    Version 3.7.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-360" title="Version 3.6.0" class="md-nav__link">
    Version 3.6.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-350" title="Version 3.5.0" class="md-nav__link">
    Version 3.5.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-342" title="Version 3.4.2" class="md-nav__link">
    Version 3.4.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-341" title="Version 3.4.1" class="md-nav__link">
    Version 3.4.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-340" title="Version 3.4.0" class="md-nav__link">
    Version 3.4.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-340-rc1" title="Version 3.4.0-RC1" class="md-nav__link">
    Version 3.4.0-RC1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-331" title="Version 3.3.1" class="md-nav__link">
    Version 3.3.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-330" title="Version 3.3.0" class="md-nav__link">
    Version 3.3.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-320" title="Version 3.2.0" class="md-nav__link">
    Version 3.2.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-312" title="Version 3.1.2" class="md-nav__link">
    Version 3.1.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-311" title="Version 3.1.1" class="md-nav__link">
    Version 3.1.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-310" title="Version 3.1.0" class="md-nav__link">
    Version 3.1.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-301" title="Version 3.0.1" class="md-nav__link">
    Version 3.0.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-300" title="Version 3.0.0" class="md-nav__link">
    Version 3.0.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-300-rc1" title="Version 3.0.0-RC1" class="md-nav__link">
    Version 3.0.0-RC1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-275" title="Version 2.7.5" class="md-nav__link">
    Version 2.7.5
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-274" title="Version 2.7.4" class="md-nav__link">
    Version 2.7.4
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-273" title="Version 2.7.3" class="md-nav__link">
    Version 2.7.3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-272" title="Version 2.7.2" class="md-nav__link">
    Version 2.7.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-271" title="Version 2.7.1" class="md-nav__link">
    Version 2.7.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-270" title="Version 2.7.0" class="md-nav__link">
    Version 2.7.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-260" title="Version 2.6.0" class="md-nav__link">
    Version 2.6.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-250" title="Version 2.5.0" class="md-nav__link">
    Version 2.5.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-240" title="Version 2.4.0" class="md-nav__link">
    Version 2.4.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-240-rc1" title="Version 2.4.0-RC1" class="md-nav__link">
    Version 2.4.0-RC1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-230" title="Version 2.3.0" class="md-nav__link">
    Version 2.3.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-220" title="Version 2.2.0" class="md-nav__link">
    Version 2.2.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-210" title="Version 2.1.0" class="md-nav__link">
    Version 2.1.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-210-rc1" title="Version 2.1.0-RC1" class="md-nav__link">
    Version 2.1.0-RC1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-200" title="Version 2.0.0" class="md-nav__link">
    Version 2.0.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-200-rc2" title="Version 2.0.0-RC2" class="md-nav__link">
    Version 2.0.0-RC2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-200-rc1" title="Version 2.0.0-RC1" class="md-nav__link">
    Version 2.0.0-RC1
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api-changes" title="API Changes" class="md-nav__link">
    API Changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-changes" title="Implementation changes" class="md-nav__link">
    Implementation changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-160" title="Version 1.6.0" class="md-nav__link">
    Version 1.6.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-154" title="Version 1.5.4" class="md-nav__link">
    Version 1.5.4
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-153" title="Version 1.5.3" class="md-nav__link">
    Version 1.5.3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-152" title="Version 1.5.2" class="md-nav__link">
    Version 1.5.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-151" title="Version 1.5.1" class="md-nav__link">
    Version 1.5.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-150" title="Version 1.5.0" class="md-nav__link">
    Version 1.5.0
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#okhttp-no-longer-uses-the-default-ssl-context" title="OkHttp no longer uses the default SSL context." class="md-nav__link">
    OkHttp no longer uses the default SSL context.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synthetic-headers-have-changed" title="Synthetic headers have changed" class="md-nav__link">
    Synthetic headers have changed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changes" title="Changes" class="md-nav__link">
    Changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-130" title="Version 1.3.0" class="md-nav__link">
    Version 1.3.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-121" title="Version 1.2.1" class="md-nav__link">
    Version 1.2.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-120" title="Version 1.2.0" class="md-nav__link">
    Version 1.2.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-111" title="Version 1.1.1" class="md-nav__link">
    Version 1.1.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-110" title="Version 1.1.0" class="md-nav__link">
    Version 1.1.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-102" title="Version 1.0.2" class="md-nav__link">
    Version 1.0.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-101" title="Version 1.0.1" class="md-nav__link">
    Version 1.0.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-100" title="Version 1.0.0" class="md-nav__link">
    Version 1.0.0
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/square/okhttp/edit/master/docs/changelog.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="change-log">Change Log<a class="headerlink" href="#change-log" title="Permanent link">&para;</a></h1>
<h2 id="version-400-rc2">Version 4.0.0-RC2<a class="headerlink" href="#version-400-rc2" title="Permanent link">&para;</a></h2>
<p><em>2019-06-21</em></p>
<ul>
<li>New: Require Kotlin 1.3.40.</li>
<li>New: Change the Kotlin API from <code>File.toRequestBody()</code> to <code>File.asRequestBody()</code> and
    <code>BufferedSource.toResponseBody()</code> to <code>BufferedSource.asResponseBody()</code>. If the returned value
    is a view of what created it, we use <em>as</em>.</li>
<li>Fix: Permit response codes of zero for compatibility with OkHttp 3.x.</li>
<li>Fix: Change the return type of <code>MockWebServer.takeRequest()</code> to be nullable.</li>
<li>Fix: Make <code>Call.clone()</code> public to Kotlin callers.</li>
</ul>
<h2 id="version-400-rc1">Version 4.0.0-RC1<a class="headerlink" href="#version-400-rc1" title="Permanent link">&para;</a></h2>
<p><em>2019-06-03</em></p>
<p><strong>OkHttp 4 upgrades OkHttp to Kotlin.</strong> This is the first stable preview of OkHttp 4. Use it to find
bugs or performance regressions before the final 4.0.0 release.</p>
<p>We tried our best to make it fast and safe to upgrade from OkHttp 3.x.
<a href="http://square.github.io/okhttp/upgrading_to_okhttp_4/">We even wrote a guide</a> to help you with it!</p>
<h2 id="version-3142">Version 3.14.2<a class="headerlink" href="#version-3142" title="Permanent link">&para;</a></h2>
<p><em>2019-05-19</em></p>
<ul>
<li>
<p>Fix: Lock in a route when recovering from an HTTP/2 connection error. We had a bug where two
    calls that failed at the same time could cause OkHttp to crash with a <code>NoSuchElementException</code>
    instead of the expected <code>IOException</code>.</p>
</li>
<li>
<p>Fix: Don&rsquo;t crash with a <code>NullPointerException</code> when formatting an error message describing a
    truncated response from an HTTPS proxy.</p>
</li>
</ul>
<h2 id="version-3123">Version 3.12.3<a class="headerlink" href="#version-3123" title="Permanent link">&para;</a></h2>
<p><em>2019-05-07</em></p>
<ul>
<li>Fix: Permit multipart file names to contain non-ASCII characters.</li>
<li>Fix: Retain the <code>Route</code> when a connection is reused on a redirect or other follow-up. This was
    causing some <code>Authenticator</code> calls to see a null route when non-null was expected.</li>
</ul>
<h2 id="version-3141">Version 3.14.1<a class="headerlink" href="#version-3141" title="Permanent link">&para;</a></h2>
<p><em>2019-04-10</em></p>
<ul>
<li>
<p>Fix: Don&rsquo;t crash when an interceptor retries when there are no more routes. This was an
    edge-case regression introduced with the events cleanup in 3.14.0.</p>
</li>
<li>
<p>Fix: Provide actionable advice when the exchange is non-null. Prior to 3.14, OkHttp would
    silently leak connections when an interceptor retries without closing the response body. With
    3.14 we detect this problem but the exception was not helpful.</p>
</li>
</ul>
<h2 id="version-3140">Version 3.14.0<a class="headerlink" href="#version-3140" title="Permanent link">&para;</a></h2>
<p><em>2019-03-14</em></p>
<ul>
<li>
<p><strong>This release deletes the long-deprecated <code>OkUrlFactory</code> and <code>OkApacheClient</code> APIs.</strong> These
    facades hide OkHttp&rsquo;s implementation behind another client&rsquo;s API. If you still need this please
    copy and paste <a href="https://gist.github.com/swankjesse/dd91c0a8854e1559b00f5fc9c7bfae70">ObsoleteUrlFactory.java</a> or
    <a href="https://gist.github.com/swankjesse/09721f72039e3a46cf50f94323deb82d">ObsoleteApacheClient.java</a> into your project.</p>
</li>
<li>
<p><strong>OkHttp now supports duplex calls over HTTP/2.</strong> With normal HTTP calls the request must finish
    before the response starts. With duplex, request and response bodies are transmitted
    simultaneously. This can be used to implement interactive conversations within a single HTTP
    call.</p>
<p>Create duplex calls by overriding the new <code>RequestBody.isDuplex()</code> method to return true.
This simple option dramatically changes the behavior of the request body and of the entire
call.</p>
<p>The <code>RequestBody.writeTo()</code> method may now retain a reference to the provided sink and
hand it off to another thread to write to it after <code>writeTo</code> returns.</p>
<p>The <code>EventListener</code> may now see requests and responses interleaved in ways not previously
permitted. For example, a listener may receive <code>responseHeadersStart()</code> followed by
<code>requestBodyEnd()</code>, both on the same call. Such events may be triggered by different threads
even for a single call.</p>
<p>Interceptors that rewrite or replace the request body may now inadvertently interfere with
duplex request bodies. Such interceptors should check <code>RequestBody.isDuplex()</code> and avoid
accessing the request body when it is.</p>
<p>Duplex calls require HTTP/2. If HTTP/1 is established instead the duplex call will fail. The
most common use of duplex calls is <a href="https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-HTTP2.md">gRPC</a>.</p>
</li>
<li>
<p>New: Prevent OkHttp from retransmitting a request body by overriding <code>RequestBody.isOneShot()</code>.
    This is most useful when writing the request body is destructive.</p>
</li>
<li>
<p>New: We&rsquo;ve added <code>requestFailed()</code> and <code>responseFailed()</code> methods to <code>EventListener</code>. These
    are called instead of <code>requestBodyEnd()</code> and <code>responseBodyEnd()</code> in some failure situations.
    They may also be fired in cases where no event was published previously. In this release we did
    an internal rewrite of our event code to fix problems where events were lost or unbalanced.</p>
</li>
<li>
<p>Fix: Don&rsquo;t leak a connection when a call is canceled immediately preceding the <code>onFailure()</code>
    callback.</p>
</li>
<li>
<p>Fix: Apply call timeouts when connecting duplex calls, web sockets, and server-sent events.
    Once the streams are established no further timeout is enforced.</p>
</li>
<li>
<p>Fix: Retain the <code>Route</code> when a connection is reused on a redirect or other follow-up. This was
    causing some <code>Authenticator</code> calls to see a null route when non-null was expected.</p>
</li>
<li>
<p>Fix: Use the correct key size in the name of <code>TLS_AES_128_CCM_8_SHA256</code> which is a TLS 1.3
    cipher suite. We accidentally specified a key size of 256, preventing that cipher suite from
    being selected for any TLS handshakes. We didn&rsquo;t notice because this cipher suite isn&rsquo;t
    supported on Android, Java, or Conscrypt.</p>
<p>We removed this cipher suite and <code>TLS_AES_128_CCM_SHA256</code> from the restricted, modern, and
compatible sets of cipher suites. These two cipher suites aren&rsquo;t enabled by default in either
Firefox or Chrome.</p>
<p>See our <a href="http://square.github.io/okhttp/tls_configuration_history/">TLS Configuration History</a> tracker for a log of all changes
to OkHttp&rsquo;s default TLS options.</p>
</li>
<li>
<p>New: Upgrade to Conscrypt 2.0.0. OkHttp works with other versions of Conscrypt but this is the
    version we&rsquo;re testing against.</p>
<div class="codehilite"><pre><span></span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;org.conscrypt:conscrypt-openjdk-uber:2.0.0&quot;</span><span class="p">)</span>
</pre></div>

</li>
<li>
<p>New: Update the embedded public suffixes list.</p>
</li>
</ul>
<h2 id="version-3122">Version 3.12.2<a class="headerlink" href="#version-3122" title="Permanent link">&para;</a></h2>
<p><em>2019-03-14</em></p>
<ul>
<li>Fix: Don&rsquo;t crash if the HTTPS server returns no certificates in the TLS handshake.</li>
<li>Fix: Don&rsquo;t leak a connection when a call is canceled immediately preceding the <code>onFailure()</code>
    callback.</li>
</ul>
<h2 id="version-3131">Version 3.13.1<a class="headerlink" href="#version-3131" title="Permanent link">&para;</a></h2>
<p><em>2019-02-05</em></p>
<ul>
<li>Fix: Don&rsquo;t crash when using a custom <code>X509TrustManager</code> or <code>SSLSocket</code> on Android. When we
    removed obsolete code for Android 4.4 we inadvertently also removed support for custom
    subclasses. We&rsquo;ve restored that support!</li>
</ul>
<h2 id="version-3130">Version 3.13.0<a class="headerlink" href="#version-3130" title="Permanent link">&para;</a></h2>
<p><em>2019-02-04</em></p>
<ul>
<li>
<p><strong>This release bumps our minimum requirements to Java 8+ or Android 5+.</strong> Cutting off old
    devices is a serious change and we don&rsquo;t do it lightly! <a href="https://medium.com/square-corner-blog/okhttp-3-13-requires-android-5-818bb78d07ce">This post</a> explains
    why we&rsquo;re doing this and how to upgrade.</p>
<p>The OkHttp 3.12.x branch will be our long-term branch for Android 2.3+ (API level 9+) and Java
7+. These platforms lack support for TLS 1.2 and should not be used. But because upgrading is
difficult we will backport critical fixes to the 3.12.x branch through December 31, 2020.</p>
</li>
<li>
<p><strong>TLSv1 and TLSv1.1 are no longer enabled by default.</strong> Major web browsers are working towards
    removing these versions altogether in early 2020. If your servers aren&rsquo;t ready yet you can
    configure OkHttp 3.13 to allow TLSv1 and TLSv1.1 connections:</p>
<div class="codehilite"><pre><span></span>OkHttpClient client = new OkHttpClient.Builder()
    .connectionSpecs(Arrays.asList(ConnectionSpec.COMPATIBLE_TLS))
    .build();
</pre></div>

</li>
<li>
<p>New: You can now access HTTP trailers with <code>Response.trailers()</code>. This method may only be called
    after the entire HTTP response body has been read.</p>
</li>
<li>
<p>New: Upgrade to Okio 1.17.3. If you&rsquo;re on Kotlin-friendly Okio 2.x this release requires 2.2.2
    or newer.</p>
<div class="codehilite"><pre><span></span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;com.squareup.okio:okio:1.17.3&quot;</span><span class="p">)</span>
</pre></div>

</li>
<li>
<p>Fix: Don&rsquo;t miss cancels when sending HTTP/2 request headers.</p>
</li>
<li>Fix: Don&rsquo;t miss whole operation timeouts when calls redirect.</li>
<li>Fix: Don&rsquo;t leak connections if web sockets have malformed responses or if <code>onOpen()</code> throws.</li>
<li>Fix: Don&rsquo;t retry when request bodies fail due to <code>FileNotFoundException</code>.</li>
<li>Fix: Don&rsquo;t crash when URLs have IPv4-mapped IPv6 addresses.</li>
<li>Fix: Don&rsquo;t crash when building <code>HandshakeCertificates</code> on Android API 28.</li>
<li>Fix: Permit multipart file names to contain non-ASCII characters.</li>
<li>New: API to get MockWebServer&rsquo;s dispatcher.</li>
<li>New: API to access headers as <code>java.time.Instant</code>.</li>
<li>New: Fail fast if a <code>SSLSocketFactory</code> is used as a <code>SocketFactory</code>.</li>
<li>New: Log the TLS handshake in <code>LoggingEventListener</code>.</li>
</ul>
<h2 id="version-3121">Version 3.12.1<a class="headerlink" href="#version-3121" title="Permanent link">&para;</a></h2>
<p><em>2018-12-23</em></p>
<ul>
<li>Fix: Remove overlapping <code>package-info.java</code>. This caused issues with some build tools.</li>
</ul>
<h2 id="version-3120">Version 3.12.0<a class="headerlink" href="#version-3120" title="Permanent link">&para;</a></h2>
<p><em>2018-11-16</em></p>
<ul>
<li>
<p><strong>OkHttp now supports TLS 1.3.</strong> This requires either Conscrypt or Java 11+.</p>
</li>
<li>
<p><strong>Proxy authenticators are now asked for preemptive authentication.</strong> OkHttp will now request
    authentication credentials before creating TLS tunnels through HTTP proxies (HTTP <code>CONNECT</code>).
    Authenticators should identify preemptive authentications by the presence of a challenge whose
    scheme is &ldquo;OkHttp-Preemptive&rdquo;.</p>
</li>
<li>
<p><strong>OkHttp now offers full-operation timeouts.</strong> This sets a limit on how long the entire call may
    take and covers resolving DNS, connecting, writing the request body, server processing, and
    reading the full response body. If a call requires redirects or retries all must complete within
    one timeout period.</p>
<p>Use <code>OkHttpClient.Builder.callTimeout()</code> to specify the default duration and <code>Call.timeout()</code> to
specify the timeout of an individual call.</p>
</li>
<li>
<p>New: Return values and fields are now non-null unless otherwise annotated.</p>
</li>
<li>New: <code>LoggingEventListener</code> makes it easy to get basic visibility into a call&rsquo;s performance.
    This class is in the <code>logging-interceptor</code> artifact.</li>
<li>New: <code>Headers.Builder.addUnsafeNonAscii()</code> allows non-ASCII values to be added without an
    immediate exception.</li>
<li>New: Headers can be redacted in <code>HttpLoggingInterceptor</code>.</li>
<li>New: <code>Headers.Builder</code> now accepts dates.</li>
<li>New: OkHttp now accepts <code>java.time.Duration</code> for timeouts on Java 8+ and Android 26+.</li>
<li>New: <code>Challenge</code> includes all authentication parameters.</li>
<li>
<p>New: Upgrade to BouncyCastle 1.60, Conscrypt 1.4.0, and Okio 1.15.0. We don&rsquo;t yet require
    Kotlin-friendly Okio 2.x but OkHttp works fine with that series.</p>
<div class="codehilite"><pre><span></span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;org.bouncycastle:bcprov-jdk15on:1.60&quot;</span><span class="p">)</span>
<span class="n">implementation</span><span class="p">(</span><span class="s">&quot;org.conscrypt:conscrypt-openjdk-uber:1.4.0&quot;</span><span class="p">)</span>
<span class="n">implementation</span><span class="p">(</span><span class="s">&quot;com.squareup.okio:okio:1.15.0&quot;</span><span class="p">)</span>
</pre></div>

</li>
<li>
<p>Fix: Handle dispatcher executor shutdowns gracefully. When there aren&rsquo;t any threads to carry a
    call its callback now gets a <code>RejectedExecutionException</code>.</p>
</li>
<li>Fix: Don&rsquo;t permanently cache responses with <code>Cache-Control: immutable</code>. We misunderstood the
    original <code>immutable</code> proposal!</li>
<li>Fix: Change <code>Authenticator</code>&lsquo;s <code>Route</code> parameter to be nullable. This was marked as non-null but
    could be called with null in some cases.</li>
<li>Fix: Don&rsquo;t create malformed URLs when <code>MockWebServer</code> is reached via an IPv6 address.</li>
<li>Fix: Don&rsquo;t crash if the system default authenticator is null.</li>
<li>Fix: Don&rsquo;t crash generating elliptic curve certificates on Android.</li>
<li>Fix: Don&rsquo;t crash doing platform detection on RoboVM.</li>
<li>Fix: Don&rsquo;t leak socket connections when web socket upgrades fail.</li>
</ul>
<h2 id="version-3110">Version 3.11.0<a class="headerlink" href="#version-3110" title="Permanent link">&para;</a></h2>
<p><em>2018-07-12</em></p>
<ul>
<li>
<p><strong>OkHttp&rsquo;s new okhttp-tls submodule tames HTTPS and TLS.</strong></p>
<p><code>HeldCertificate</code> is a TLS certificate and its private key. Generate a certificate with its
builder then use it to sign another certificate or perform a TLS handshake. The
<code>certificatePem()</code> method encodes the certificate in the familiar PEM format
(<code>--- BEGIN CERTIFICATE ---</code>); the <code>privateKeyPkcs8Pem()</code> does likewise for the private key.</p>
<p><code>HandshakeCertificates</code> holds the TLS certificates required for a TLS handshake. On the server
it keeps your <code>HeldCertificate</code> and its chain. On the client it keeps the root certificates
that are trusted to sign a server&rsquo;s certificate chain. <code>HandshakeCertificates</code> also works with
mutual TLS where these roles are reversed.</p>
<p>These classes make it possible to enable HTTPS in MockWebServer in <a href="https://github.com/square/okhttp/blob/master/samples/guide/src/main/java/okhttp3/recipes/HttpsServer.java">just a few lines of
code</a>.</p>
</li>
<li>
<p><strong>OkHttp now supports prior knowledge cleartext HTTP/2.</strong> Enable this by setting
    <code>Protocol.H2_PRIOR_KNOWLEDGE</code> as the lone protocol on an <code>OkHttpClient.Builder</code>. This mode
    only supports <code>http:</code> URLs and is best suited in closed environments where HTTPS is
    inappropriate.</p>
</li>
<li>
<p>New: <code>HttpUrl.get(String)</code> is an alternative to <code>HttpUrl.parse(String)</code> that throws an exception
    when the URL is malformed instead of returning null. Use this to avoid checking for null in
    situations where the input is known to be well-formed. We&rsquo;ve also added <code>MediaType.get(String)</code>
    which is an exception-throwing alternative to <code>MediaType.parse(String)</code>.</p>
</li>
<li>New: The <code>EventListener</code> API previewed in OkHttp 3.9 has graduated to a stable API. Use this
    interface to track metrics and monitor HTTP requests&rsquo; size and duration.</li>
<li>New: <code>okhttp-dnsoverhttps</code> is an experimental API for doing DNS queries over HTTPS. Using HTTPS
    for DNS offers better security and potentially better performance. This feature is a preview:
    the API is subject to change.</li>
<li>New: <code>okhttp-sse</code> is an early preview of Server-Sent Events (SSE). This feature is incomplete
    and is only suitable for experimental use.</li>
<li>New: MockWebServer now supports client authentication (mutual TLS). Call <code>requestClientAuth()</code>
    to permit an optional client certificate or <code>requireClientAuth()</code> to require one.</li>
<li>New: <code>RecordedRequest.getHandshake()</code> returns the HTTPS handshake of a request sent to
    <code>MockWebServer</code>.</li>
<li>Fix: Honor the <code>MockResponse</code> header delay in MockWebServer.</li>
<li>Fix: Don&rsquo;t release HTTP/2 connections that have multiple canceled calls. We had a bug where
    canceling calls would cause the shared HTTP/2 connection to be unnecessarily released. This
    harmed connection reuse.</li>
<li>Fix: Ensure canceled and discarded HTTP/2 data is not permanently counted against the limited
    flow control window. We had a few bugs where window size accounting was broken when streams
    were canceled or reset.</li>
<li>Fix: Recover gracefully if the TLS session returns an unexpected version (<code>NONE</code>) or cipher
    suite (<code>SSL_NULL_WITH_NULL_NULL</code>).</li>
<li>Fix: Don&rsquo;t change Conscrypt configuration globally. We migrated from a process-wide setting to
    configuring only OkHttp&rsquo;s TLS sockets.</li>
<li>Fix: Prefer TLSv1.2 where it is available. On certain older platforms it is necessary to opt-in
    to TLSv1.2.</li>
<li>New: <code>Request.tag()</code> permits multiple tags. Use a <code>Class&lt;?&gt;</code> as a key to identify tags. Note
    that <code>tag()</code> now returns null if the request has no tag. Previously this would return the
    request itself.</li>
<li>New: <code>Headers.Builder.addAll(Headers)</code>.</li>
<li>New: <code>ResponseBody.create(MediaType, ByteString)</code>.</li>
<li>New: Embed R8/ProGuard rules in the jar. These will be applied automatically by R8.</li>
<li>Fix: Release the connection if <code>Authenticator</code> throws an exception.</li>
<li>Fix: Change the declaration of <code>OkHttpClient.cache()</code> to return a <code>@Nullable Cache</code>. The return
    value has always been nullable but it wasn&rsquo;t declared properly.</li>
<li>Fix: Reverse suppression of connect exceptions. When both a call and its retry fail, we now
    throw the initial exception which is most likely to be actionable.</li>
<li>Fix: Retain interrupted state when throwing <code>InterruptedIOException</code>. A single interrupt should
    now be sufficient to break out an in-flight OkHttp call.</li>
<li>Fix: Don&rsquo;t drop a call to <code>EventListener.callEnd()</code> when the response body is consumed inside an
    interceptor.</li>
</ul>
<h2 id="version-3100">Version 3.10.0<a class="headerlink" href="#version-3100" title="Permanent link">&para;</a></h2>
<p><em>2018-02-24</em></p>
<ul>
<li>
<p><strong>The pingInterval() feature now aggressively checks connectivity for web
    sockets and HTTP/2 connections.</strong></p>
<p>Previously if you configured a ping interval that would cause OkHttp to send
pings, but it did not track whether the reply pongs were received. With this
update OkHttp requires that every ping receive a response: if it does not
the connection will be closed and the listener&rsquo;s <code>onFailure()</code> method will
be called.</p>
<p>Web sockets have always been had pings, but pings on HTTP/2 connections is
new in this release. Pings are used for connections that are busy carrying
calls and for idle connections in the connection pool. (Pings do not impact
when pooled connections are evicted).</p>
<p>If you have a configured ping interval, you should confirm that it is long
enough for a roundtrip from client to server. If your ping interval is too
short, slow connections may be misinterpreted as failed connections. A ping
interval of 30 seconds is reasonable for most use cases.</p>
</li>
<li>
<p><strong>OkHttp now supports <a href="https://github.com/google/conscrypt/">Conscrypt</a>.</strong> Conscrypt is a Java Security
    Provider that integrates BoringSSL into the Java platform. Conscrypt
    supports more cipher suites than the JVM’s default provider and may also
    execute more efficiently.</p>
<p>To use it, first register a <a href="https://github.com/google/conscrypt/#download">Conscrypt dependency</a> in
your build system.</p>
<p>OkHttp will use Conscrypt if you set the <code>okhttp.platform</code> system property
to <code>conscrypt</code>.</p>
<p>Alternatively, OkHttp will also use Conscrypt if you install it as your
preferred security provider. To do so, add the following code to execute
before you create your <code>OkHttpClient</code>.</p>
<div class="codehilite"><pre><span></span>Security.insertProviderAt(
    new org.conscrypt.OpenSSLProvider(), 1);
</pre></div>

<p>Conscrypt is the bundled security provider on Android so it is not necessary
to configure it on that platform.</p>
</li>
<li>
<p>New: <code>HttpUrl.addQueryParameter()</code> percent-escapes more characters.
    Previously several ASCII punctuation characters were not percent-escaped
    when used with this method. This does not impact already-encoded query
    parameters in APIs like <code>HttpUrl.parse()</code> and
    <code>HttpUrl.Builder.addEncodedQueryParameter()</code>.</p>
</li>
<li>New: CBC-mode ECDSA cipher suites have been removed from OkHttp&rsquo;s default
    configuration: <code>TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code> and
    <code>TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>. This tracks a <a href="https://developers.google.com/web/updates/2016/12/chrome-56-deprecations#remove_cbc-mode_ecdsa_ciphers_in_tls">Chromium
    change</a> to remove these cipher suites because they are
    fragile and rarely-used.</li>
<li>New: Don&rsquo;t fall back to common name (CN) verification for hostnames. This
    behavior was deprecated with RFC 2818 in May 2000 and was recently dropped
    from major web browsers.</li>
<li>New: Honor the <code>Retry-After</code> response header. HTTP 503 (Unavailable)
    responses are retried automatically if this header is present and its delay
    is 0 seconds. HTTP 408 (Client Timeout) responses are retried automatically
    if the header is absent or its delay is 0 seconds.</li>
<li>New: Allow request bodies for all HTTP methods except GET and HEAD.</li>
<li>New: Automatic module name of <code>okhttp3</code> for use with the Java Platform
    Module System.</li>
<li>New: Log gzipped bodies when <code>HttpLoggingInterceptor</code> is used as a network
    interceptor.</li>
<li>New: <code>Protocol.QUIC</code> constant. This protocol is not supported but this
    constant is included for completeness.</li>
<li>
<p>New: Upgrade to Okio 1.14.0.</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.squareup.okio<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>okio<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.14.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

com.squareup.okio:okio:1.14.0
</pre></div>

</li>
<li>
<p>Fix: Handle <code>HTTP/1.1 100 Continue</code> status lines, even on requests that did
    not send the <code>Expect: continue</code> request header.</p>
</li>
<li>Fix: Do not count web sockets toward the dispatcher&rsquo;s per-host connection
    limit.</li>
<li>Fix: Avoid using invalid HTTPS sessions. This prevents OkHttp from crashing
    with the error, <code>Unexpected TLS version: NONE</code>.</li>
<li>Fix: Don&rsquo;t corrupt the response cache when a 304 (Not Modified) response
    overrides the stored &ldquo;Content-Encoding&rdquo; header.</li>
<li>Fix: Gracefully shut down the HTTP/2 connection before it exhausts the
    namespace of stream IDs (~536 million streams).</li>
<li>Fix: Never pass a null <code>Route</code> to <code>Authenticator</code>. There was a bug where
    routes were omitted for eagerly-closed connections.</li>
</ul>
<h2 id="version-391">Version 3.9.1<a class="headerlink" href="#version-391" title="Permanent link">&para;</a></h2>
<p><em>2017-11-18</em></p>
<ul>
<li>New: Recover gracefully when Android&rsquo;s DNS crashes with an unexpected
    <code>NullPointerException</code>.</li>
<li>New: Recover gracefully when Android&rsquo;s socket connections crash with an
    unexpected <code>ClassCastException</code>.</li>
<li>Fix: Don&rsquo;t include the URL&rsquo;s fragment in <code>encodedQuery()</code> when the query
    itself is empty.</li>
</ul>
<h2 id="version-390">Version 3.9.0<a class="headerlink" href="#version-390" title="Permanent link">&para;</a></h2>
<p><em>2017-09-03</em></p>
<ul>
<li>
<p><strong>Interceptors are more capable.</strong> The <code>Chain</code> interface now offers access
    to the call and can adjust all call timeouts. Note that this change is
    source-incompatible for code that implements the <code>Chain</code> interface.
    We don&rsquo;t expect this to be a problem in practice!</p>
</li>
<li>
<p><strong>OkHttp has an experimental new API for tracking metrics.</strong> The new
    <code>EventListener</code> API is designed to help developers monitor HTTP requests&rsquo;
    size and duration. This feature is an unstable preview: the API is subject
    to change, and the implementation is incomplete. This is a big new API we
    are eager for feedback.</p>
</li>
<li>
<p>New: Support ALPN via Google Play Services&rsquo; Dynamic Security Provider. This
    expands HTTP/2 support to older Android devices that have Google Play
    Services.</p>
</li>
<li>New: Consider all routes when looking for candidate coalesced connections.
    This increases the likelihood that HTTP/2 connections will be shared.</li>
<li>New: Authentication challenges and credentials now use a charset. Use this in
    your authenticator to support user names and passwords with non-ASCII
    characters.</li>
<li>New: Accept a charset in <code>FormBody.Builder</code>. Previously form bodies were
    always UTF-8.</li>
<li>New: Support the <code>immutable</code> cache-control directive.</li>
<li>Fix: Don&rsquo;t crash when an HTTP/2 call is redirected while the connection is
    being shut down.</li>
<li>Fix: Don&rsquo;t drop headers of healthy streams that raced with <code>GOAWAY</code> frames.
    This bug would cause HTTP/2 streams to occasional hang when the connection
    was shutting down.</li>
<li>Fix: Honor <code>OkHttpClient.retryOnConnectionFailure()</code> when the response is a
    HTTP 408 Request Timeout. If retries are enabled, OkHttp will retry exactly
    once in response to a 408.</li>
<li>Fix: Don&rsquo;t crash when reading the empty <code>HEAD</code> response body if it specifies
    a <code>Content-Length</code>.</li>
<li>Fix: Don&rsquo;t crash if the thread is interrupted while reading the public
    suffix database.</li>
<li>Fix: Use relative resource path when loading the public suffix database.
    Loading the resource using a path relative to the class prevents conflicts
    when the OkHttp classes are relocated (shaded) by allowing multiple private
    copies of the database.</li>
<li>Fix: Accept cookies for URLs that have an IPv6 address for a host.</li>
<li>Fix: Don&rsquo;t log the protocol (HTTP/1.1, h2) in HttpLoggingInterceptor if the
    protocol isn&rsquo;t negotiated yet! Previously we&rsquo;d log HTTP/1.1 by default, and
    this was confusing.</li>
<li>Fix: Omit the message from MockWebServer&rsquo;s HTTP/2 <code>:status</code> header.</li>
<li>Fix: Handle &lsquo;Expect: 100 Continue&rsquo; properly in MockWebServer.</li>
</ul>
<h2 id="version-381">Version 3.8.1<a class="headerlink" href="#version-381" title="Permanent link">&para;</a></h2>
<p><em>2017-06-18</em></p>
<ul>
<li>Fix: Recover gracefully from stale coalesced connections. We had a bug where
    connection coalescing (introduced in OkHttp 3.7.0) and stale connection
    recovery could interact to cause a <code>NoSuchElementException</code> crash in the
    <code>RouteSelector</code>.</li>
</ul>
<h2 id="version-380">Version 3.8.0<a class="headerlink" href="#version-380" title="Permanent link">&para;</a></h2>
<p><em>2017-05-13</em></p>
<ul>
<li>
<p><strong>OkHttp now uses <code>@Nullable</code> to annotate all possibly-null values.</strong> We&rsquo;ve
    added a compile-time dependency on the JSR 305 annotations. This is a
    <a href="https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html">provided</a> dependency and does not need to be included in
    your build configuration, <code>.jar</code> file, or <code>.apk</code>. We use
    <code>@ParametersAreNonnullByDefault</code> and all parameters and return types are
    never null unless explicitly annotated <code>@Nullable</code>.</p>
</li>
<li>
<p><strong>Warning: this release is source-incompatible for Kotlin users.</strong>
    Nullability was previously ambiguous and lenient but now the compiler will
    enforce strict null checks.</p>
</li>
<li>
<p>New: The response message is now non-null. This is the &ldquo;Not Found&rdquo; in the
    status line &ldquo;HTTP 404 Not Found&rdquo;. If you are building responses
    programmatically (with <code>new Response.Builder()</code>) you must now always supply
    a message. An empty string <code>""</code> is permitted. This value was never null on
    responses returned by OkHttp itself, and it was an old mistake to permit
    application code to omit a message.</p>
</li>
<li>
<p>The challenge&rsquo;s scheme and realm are now non-null. If you are calling
    <code>new Challenge(scheme, realm)</code> you must provide non-null values. These were
    never null in challenges created by OkHttp, but could have been null in
    application code that creates challenges.</p>
</li>
<li>
<p>New: The <code>TlsVersion</code> of a <code>Handshake</code> is now non-null. If you are calling
    <code>Handshake.get()</code> with a null TLS version, you must instead now provide a
    non-null <code>TlsVersion</code>. Cache responses persisted prior to OkHttp 3.0 did not
    store a TLS version; for these unknown values the handshake is defaulted to
    <code>TlsVersion.SSL_3_0</code>.</p>
</li>
<li>
<p>New: Upgrade to Okio 1.13.0.</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.squareup.okio<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>okio<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.13.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

com.squareup.okio:okio:1.13.0
</pre></div>

</li>
<li>
<p>Fix: gracefully recover when Android 7.0&rsquo;s sockets throw an unexpected
    <code>NullPointerException</code>.</p>
</li>
</ul>
<h2 id="version-370">Version 3.7.0<a class="headerlink" href="#version-370" title="Permanent link">&para;</a></h2>
<p><em>2017-04-15</em></p>
<ul>
<li><strong>OkHttp no longer recovers from TLS handshake failures by attempting a TLSv1 connection.</strong>
    The fallback was necessary for servers that implemented version negotiation incorrectly. Now
    that 99.99% of servers do it right this fallback is obsolete.</li>
<li>Fix: Do not honor cookies set on a public domain. Previously a malicious site could inject
    cookies on top-level domains like <code>co.uk</code> because our cookie parser didn&rsquo;t honor the <a href="https://publicsuffix.org/">public
    suffix</a> list. Alongside this fix is a new API, <code>HttpUrl.topPrivateDomain()</code>,
    which returns the privately domain name if the URL has one.</li>
<li>Fix: Change <code>MediaType.charset()</code> to return null for unexpected charsets.</li>
<li>Fix: Don&rsquo;t skip cache invalidation if the invalidating response has no body.</li>
<li>Fix: Don&rsquo;t use a cryptographic random number generator for web sockets. Some Android devices
    implement <code>SecureRandom</code> incorrectly!</li>
<li>Fix: Correctly canonicalize IPv6 addresses in <code>HttpUrl</code>. This prevented OkHttp from trusting
    HTTPS certificates issued to certain IPv6 addresses.</li>
<li>Fix: Don&rsquo;t reuse connections after an unsuccessful <code>Expect: 100-continue</code>.</li>
<li>Fix: Handle either <code>TLS_</code> or <code>SSL_</code> prefixes for cipher suite names. This is necessary for
    IBM JVMs that use the <code>SSL_</code> prefix exclusively.</li>
<li>Fix: Reject HTTP/2 data frames if the stream ID is 0.</li>
<li>
<p>New: Upgrade to Okio 1.12.0.</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.squareup.okio<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>okio<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.12.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

com.squareup.okio:okio:1.12.0
</pre></div>

</li>
<li>
<p>New: Connection coalescing. OkHttp may reuse HTTP/2 connections across calls that share an IP
    address and HTTPS certificate, even if their domain names are different.</p>
</li>
<li>New: MockWebServer&rsquo;s <code>RecordedRequest</code> exposes the requested <code>HttpUrl</code> with <code>getRequestUrl()</code>.</li>
</ul>
<h2 id="version-360">Version 3.6.0<a class="headerlink" href="#version-360" title="Permanent link">&para;</a></h2>
<p><em>2017-01-29</em></p>
<ul>
<li>Fix: Don&rsquo;t crash with a &ldquo;cache is closed&rdquo; error when there is an error initializing the cache.</li>
<li>Fix: Calling <code>disconnect()</code> on a connecting <code>HttpUrlConnection</code> could cause it to retry in an
    infinite loop! This regression was introduced in OkHttp 2.7.0.</li>
<li>Fix: Drop cookies that contain ASCII NULL and other bad characters. Previously such cookies
    would cause OkHttp to crash when they were included in a request.</li>
<li>Fix: Release duplicated multiplexed connections. If we concurrently establish connections to an
    HTTP/2 server, close all but the first connection.</li>
<li>Fix: Fail the HTTP/2 connection if first frame isn&rsquo;t <code>SETTINGS</code>.</li>
<li>Fix: Forbid spaces in header names.</li>
<li>Fix: Don&rsquo;t offer to do gzip if the request is partial.</li>
<li>Fix: MockWebServer is now usable with JUnit 5. That update <a href="https://junit.org/junit5/docs/current/user-guide/#migrating-from-junit4-rulesupport">broke the rules</a>.</li>
<li>New: Support <code>Expect: 100-continue</code> as a request header. Callers can use this header to
    pessimistically hold off on transmitting a request body until a server gives the go-ahead.</li>
<li>New: Permit network interceptors to rewrite the host header for HTTP/2. This makes it possible
    to do domain fronting.</li>
<li>New: charset support for <code>Credentials.basic()</code>.</li>
</ul>
<h2 id="version-350">Version 3.5.0<a class="headerlink" href="#version-350" title="Permanent link">&para;</a></h2>
<p><em>2016-11-30</em></p>
<ul>
<li>
<p><strong>Web Sockets are now a stable feature of OkHttp.</strong> Since being introduced as a beta feature in
    OkHttp 2.3 our web socket client has matured. Connect to a server&rsquo;s web socket with
    <code>OkHttpClient.newWebSocket()</code>, send messages with <code>send()</code>, and receive messages with the
    <code>WebSocketListener</code>.</p>
<p>The <code>okhttp-ws</code> submodule is no longer available and <code>okhttp-ws</code> artifacts from previous
releases of OkHttp are not compatible with OkHttp 3.5. When upgrading to the new package
please note that the <code>WebSocket</code> and <code>WebSocketCall</code> classes have been merged. Sending messages
is now asynchronous and they may be enqueued before the web socket is connected.</p>
</li>
<li>
<p><strong>OkHttp no longer attempts a direct connection if the system&rsquo;s HTTP proxy fails.</strong> This
    behavior was surprising because OkHttp was disregarding the user&rsquo;s specified configuration. If
    you need to customize proxy fallback behavior, implement your own <code>java.net.ProxySelector</code>.</p>
</li>
<li>
<p>Fix: Support TLSv1.3 on devices that support it.</p>
</li>
<li>
<p>Fix: Share pooled connections across equivalent <code>OkHttpClient</code> instances. Previous releases had
    a bug where a shared connection pool did not guarantee shared connections in some cases.</p>
</li>
<li>Fix: Prefer the server&rsquo;s response body on all conditional cache misses. Previously we would
    return the cached response&rsquo;s body if it had a newer <code>Last-Modified</code> date.</li>
<li>Fix: Update the stored timestamp on conditional cache hits.</li>
<li>New: Optimized HTTP/2 request header encoding. More headers are HPACK-encoded and string
    literals are now Huffman-encoded.</li>
<li>New: Expose <code>Part</code> headers and body in <code>Multipart</code>.</li>
<li>
<p>New: Make <code>ResponseBody.string()</code> and <code>ResponseBody.charStream()</code> BOM-aware. If your HTTP
    response body begins with a <a href="https://en.wikipedia.org/wiki/Byte_order_mark">byte order mark</a> it will be consumed and used to select a
    charset for the remaining bytes. Most applications should not need a byte order mark.</p>
</li>
<li>
<p>New: Upgrade to Okio 1.11.0.</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.squareup.okio<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>okio<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.11.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

com.squareup.okio:okio:1.11.0
</pre></div>

</li>
<li>
<p>Fix: Avoid sending empty HTTP/2 data frames when there is no request body.</p>
</li>
<li>Fix: Add a leading <code>.</code> for better domain matching in <code>JavaNetCookieJar</code>.</li>
<li>Fix: Gracefully recover from HTTP/2 connection shutdowns at start of request.</li>
<li>Fix: Be lenient if a <code>MediaType</code>&lsquo;s character set is <code>'single-quoted'</code>.</li>
<li>Fix: Allow horizontal tab characters in header values.</li>
<li>Fix: When parsing HTTP authentication headers permit challenge parameters in any order.</li>
</ul>
<h2 id="version-342">Version 3.4.2<a class="headerlink" href="#version-342" title="Permanent link">&para;</a></h2>
<p><em>2016-11-03</em></p>
<ul>
<li>Fix: Recover gracefully when an HTTP/2 connection is shutdown. We had a
    bug where shutdown HTTP/2 connections were considered usable. This caused
    infinite loops when calls attempted to recover.</li>
</ul>
<h2 id="version-341">Version 3.4.1<a class="headerlink" href="#version-341" title="Permanent link">&para;</a></h2>
<p><em>2016-07-10</em></p>
<ul>
<li><strong>Fix a major bug in encoding HTTP headers.</strong> In 3.4.0 and 3.4.0-RC1 OkHttp
    had an off-by-one bug in our HPACK encoder. This bug could have caused the
    wrong headers to be emitted after a sequence of HTTP/2 requests! Everyone
    who is using OkHttp 3.4.0 or 3.4.0-RC1 should upgrade for this bug fix.</li>
</ul>
<h2 id="version-340">Version 3.4.0<a class="headerlink" href="#version-340" title="Permanent link">&para;</a></h2>
<p><em>2016-07-08</em></p>
<ul>
<li>New: Support dynamic table size changes to HPACK Encoder.</li>
<li>Fix: Use <code>TreeMap</code> in <code>Headers.toMultimap()</code>. This makes string lookups on
    the returned map case-insensitive.</li>
<li>Fix: Don&rsquo;t share the OkHttpClient&rsquo;s <code>Dispatcher</code> in <code>HttpURLConnection</code>.</li>
</ul>
<h2 id="version-340-rc1">Version 3.4.0-RC1<a class="headerlink" href="#version-340-rc1" title="Permanent link">&para;</a></h2>
<p><em>2016-07-02</em></p>
<ul>
<li>
<p><strong>We’ve rewritten HttpURLConnection and HttpsURLConnection.</strong> Previously we
    shared a single HTTP engine between two frontend APIs: <code>HttpURLConnection</code>
    and <code>Call</code>. With this release we’ve rearranged things so that the
    <code>HttpURLConnection</code> frontend now delegates to the <code>Call</code> APIs internally.
    This has enabled substantial simplifications and optimizations in the OkHttp
    core for both frontends.</p>
<p>For most HTTP requests the consequences of this change will be negligible.
If your application uses <code>HttpURLConnection.connect()</code>,
<code>setFixedLengthStreamingMode()</code>, or <code>setChunkedStreamingMode()</code>, OkHttp will
now use a async dispatcher thread to establish the HTTP connection.</p>
<p>We don’t expect this change to have any behavior or performance
consequences. Regardless, please exercise your <code>OkUrlFactory</code> and
<code>HttpURLConnection</code> code when applying this update.</p>
</li>
<li>
<p><strong>Cipher suites may now have arbitrary names.</strong> Previously <code>CipherSuite</code> was
    a Java enum and it was impossible to define new cipher suites without first
    upgrading OkHttp. With this change it is now a regular Java class with
    enum-like constants. Application code that uses enum methods on cipher
    suites (<code>ordinal()</code>, <code>name()</code>, etc.) will break with this change.</p>
</li>
<li>
<p>Fix: <code>CertificatePinner</code> now matches canonicalized hostnames. Previously
    this was case sensitive. This change should also make it easier to configure
    certificate pinning for internationalized domain names.</p>
</li>
<li>Fix: Don’t crash on non-ASCII <code>ETag</code> headers. Previously OkHttp would reject
    these headers when validating a cached response.</li>
<li>Fix: Don’t allow remote peer to arbitrarily size the HPACK decoder dynamic
    table.</li>
<li>Fix: Honor per-host configuration in Android’s network security config.
    Previously disabling cleartext for any host would disable cleartext for all
    hosts. Note that this setting is only available on Android 24+.</li>
<li>New: HPACK compression is now dynamic. This should improve performance when
    transmitting request headers over HTTP/2.</li>
<li>New: <code>Dispatcher.setIdleCallback()</code> can be used to signal when there are no
    calls in flight. This is useful for <a href="https://github.com/JakeWharton/okhttp-idling-resource">testing with
    Espresso</a>.</li>
<li>
<p>New: Upgrade to Okio 1.9.0.</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.squareup.okio<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>okio<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.9.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

</li>
</ul>
<h2 id="version-331">Version 3.3.1<a class="headerlink" href="#version-331" title="Permanent link">&para;</a></h2>
<p><em>2016-05-28</em></p>
<ul>
<li>Fix: The plaintext check in HttpLoggingInterceptor incorrectly classified
    newline characters as control characters. This is fixed.</li>
<li>Fix: Don&rsquo;t crash reading non-ASCII characters in HTTP/2 headers or in cached
    HTTP headers.</li>
<li>Fix: Retain the response body when an attempt to open a web socket returns a
    non-101 response code.</li>
</ul>
<h2 id="version-330">Version 3.3.0<a class="headerlink" href="#version-330" title="Permanent link">&para;</a></h2>
<p><em>2016-05-24</em></p>
<ul>
<li>New: <code>Response.sentRequestAtMillis()</code> and <code>receivedResponseAtMillis()</code>
    methods track the system&rsquo;s local time when network calls are made. These
    replace the <code>OkHttp-Sent-Millis</code> and <code>OkHttp-Received-Millis</code> headers that were
    present in earlier versions of OkHttp.</li>
<li>New: Accept user-provided trust managers in <code>OkHttpClient.Builder</code>. This
    allows OkHttp to satisfy its TLS requirements directly. Otherwise OkHttp
    will use reflection to extract the <code>TrustManager</code> from the
    <code>SSLSocketFactory</code>.</li>
<li>New: Support prerelease Java 9. This gets ALPN from the platform rather than
    relying on the alpn-boot bootclasspath override.</li>
<li>New: <code>HttpLoggingInterceptor</code> now logs connection failures.</li>
<li>
<p>New: Upgrade to Okio 1.8.0.</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.squareup.okio<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>okio<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.8.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

</li>
<li>
<p>Fix: Gracefully recover from a failure to rebuild the cache journal.</p>
</li>
<li>Fix: Don&rsquo;t corrupt cache entries when a cache entry is evicted while it is
    being updated.</li>
<li>Fix: Make logging more consistent throughout OkHttp.</li>
<li>Fix: Log plaintext bodies only. This uses simple heuristics to differentiate
    text from other data.</li>
<li>Fix: Recover from <code>REFUSED_STREAM</code> errors in HTTP/2. This should improve
    interoperability with Nginx 1.10.0, which <a href="https://trac.nginx.org/nginx/ticket/959">refuses</a> streams
    created before HTTP/2 settings have been acknowledged.</li>
<li>Fix: Improve recovery from failed routes.</li>
<li>Fix: Accommodate tunneling proxies that close the connection after an auth
    challenge.</li>
<li>Fix: Use the proxy authenticator when authenticating HTTP proxies. This
    regression was introduced in OkHttp 3.0.</li>
<li>Fix: Fail fast if network interceptors transform the response body such that
    closing it doesn&rsquo;t also close the underlying stream. We had a bug where
    OkHttp would attempt to reuse a connection but couldn&rsquo;t because it was still
    held by a prior request.</li>
<li>Fix: Ensure network interceptors always have access to the underlying
    connection.</li>
<li>Fix: Use <code>X509TrustManagerExtensions</code> on Android 17+.</li>
<li>Fix: Unblock waiting dispatchers on MockWebServer shutdown.</li>
</ul>
<h2 id="version-320">Version 3.2.0<a class="headerlink" href="#version-320" title="Permanent link">&para;</a></h2>
<p><em>2016-02-25</em></p>
<ul>
<li>Fix: Change the certificate pinner to always build full chains. This
    prevents a potential crash when using certificate pinning with the Google
    Play Services security provider.</li>
<li>Fix: Make IPv6 request lines consistent with Firefox and Chrome.</li>
<li>Fix: Recover gracefully when trimming the response cache fails.</li>
<li>New: Add multiple path segments using a single string in <code>HttpUrl.Builder</code>.</li>
<li>New: Support SHA-256 pins in certificate pinner.</li>
</ul>
<h2 id="version-312">Version 3.1.2<a class="headerlink" href="#version-312" title="Permanent link">&para;</a></h2>
<p><em>2016-02-10</em></p>
<ul>
<li>Fix: Don’t crash when finding the trust manager on Robolectric. We attempted
    to detect the host platform and got confused because Robolectric looks like
    Android but isn’t!</li>
<li>Fix: Change <code>CertificatePinner</code> to skip sanitizing the certificate chain
    when no certificates were pinned. This avoids an SSL failure in insecure
    “trust everyone” configurations, such as when talking to a development
    HTTPS server that has a self-signed certificate.</li>
</ul>
<h2 id="version-311">Version 3.1.1<a class="headerlink" href="#version-311" title="Permanent link">&para;</a></h2>
<p><em>2016-02-07</em></p>
<ul>
<li>Fix: Don&rsquo;t crash when finding the trust manager if the Play Services (GMS)
    security provider is installed.</li>
<li>Fix: The previous release introduced a performance regression on Android,
    caused by looking up CA certificates. This is now fixed.</li>
</ul>
<h2 id="version-310">Version 3.1.0<a class="headerlink" href="#version-310" title="Permanent link">&para;</a></h2>
<p><em>2016-02-06</em></p>
<ul>
<li>New: WebSockets now defer some writes. This should improve performance for
    some applications.</li>
<li>New: Override <code>equals()</code> and <code>hashCode()</code> in our new cookie class. This
    class now defines equality by value rather than by reference.</li>
<li>New: Handle 408 responses by retrying the request. This allows servers to
    direct clients to retry rather than failing permanently.</li>
<li>New: Expose the framed protocol in <code>Connection</code>. Previously this would
    return the application-layer protocol (HTTP/1.1 or HTTP/1.0); now it always
    returns the wire-layer protocol (HTTP/2, SPDY/3.1, or HTTP/1.1).</li>
<li>Fix: Permit the trusted CA root to be pinned by <code>CertificatePinner</code>.</li>
<li>Fix: Silently ignore unknown HTTP/2 settings. Previously this would cause
    the entire connection to fail.</li>
<li>Fix: Don’t crash on unexpected charsets in the logging interceptor.</li>
<li>Fix: <code>OkHttpClient</code> is now non-final for the benefit of mocking frameworks.
    Mocking sophisticated classes like <code>OkHttpClient</code> is fragile and you
    shouldn’t do it. But if that’s how you want to live your life we won’t stand
    in your way!</li>
</ul>
<h2 id="version-301">Version 3.0.1<a class="headerlink" href="#version-301" title="Permanent link">&para;</a></h2>
<p><em>2016-01-14</em></p>
<ul>
<li>Rollback OSGi support. This was causing library jars to include more classes
    than expected, which interfered with Gradle builds.</li>
</ul>
<h2 id="version-300">Version 3.0.0<a class="headerlink" href="#version-300" title="Permanent link">&para;</a></h2>
<p><em>2016-01-13</em></p>
<p>This release commits to a stable 3.0 API. Read the 3.0.0-RC1 changes for advice
on upgrading from 2.x to 3.x.</p>
<ul>
<li><strong>The <code>Callback</code> interface now takes a <code>Call</code></strong>. This makes it easier to
    check if the call was canceled from within the callback. When migrating
    async calls to this new API, <code>Call</code> is now the first parameter for both
    <code>onResponse()</code> and <code>onFailure()</code>.</li>
<li>Fix: handle multiple cookies in <code>JavaNetCookieJar</code> on Android.</li>
<li>Fix: improve the default HTTP message in MockWebServer responses.</li>
<li>Fix: don&rsquo;t leak file handles when a conditional GET throws.</li>
<li>Fix: Use charset specified by the request body content type in OkHttp&rsquo;s
    logging interceptor.</li>
<li>Fix: Don&rsquo;t eagerly release pools on cache hits.</li>
<li>New: Make OkHttp OSGi ready.</li>
<li>New: Add already-implemented interfaces Closeable and Flushable to the cache.</li>
</ul>
<h2 id="version-300-rc1">Version 3.0.0-RC1<a class="headerlink" href="#version-300-rc1" title="Permanent link">&para;</a></h2>
<p><em>2016-01-02</em></p>
<p>OkHttp 3 is a major release focused on API simplicity and consistency. The API
changes are numerous but most are cosmetic. Applications should be able to
upgrade from the 2.x API to the 3.x API mechanically and without risk.</p>
<p>Because the release includes breaking API changes, we&rsquo;re changing the project&rsquo;s
package name from <code>com.squareup.okhttp</code> to <code>okhttp3</code>. This should make it
possible for large applications to migrate incrementally. The Maven group ID
is now <code>com.squareup.okhttp3</code>. For an explanation of this strategy, see Jake
Wharton&rsquo;s post, <a href="http://jakewharton.com/java-interoperability-policy-for-major-version-updates/">Java Interoperability Policy for Major Version
Updates</a>.</p>
<p>This release obsoletes OkHttp 2.x, and all code that uses OkHttp&rsquo;s
<code>com.squareup.okhttp</code> package should upgrade to the <code>okhttp3</code> package. Libraries
that depend on OkHttp should upgrade quickly to prevent applications from being
stuck on the old version.</p>
<ul>
<li>
<p><strong>There is no longer a global singleton connection pool.</strong> In OkHttp 2.x,
    all <code>OkHttpClient</code> instances shared a common connection pool by default.
    In OkHttp 3.x, each new <code>OkHttpClient</code> gets its own private connection pool.
    Applications should avoid creating many connection pools as doing so
    prevents connection reuse. Each connection pool holds its own set of
    connections alive so applications that have many pools also risk exhausting
    memory!</p>
<p>The best practice in OkHttp 3 is to create a single OkHttpClient instance
and share it throughout the application. Requests that needs a customized
client should call <code>OkHttpClient.newBuilder()</code> on that shared instance.
This allows customization without the drawbacks of separate connection
pools.</p>
</li>
<li>
<p><strong>OkHttpClient is now stateless.</strong> In the 2.x API <code>OkHttpClient</code> had getters
    and setters. Internally each request was forced to make its own complete
    snapshot of the <code>OkHttpClient</code> instance to defend against racy configuration
    changes. In 3.x, <code>OkHttpClient</code> is now stateless and has a builder. Note
    that this class is not strictly immutable as it has stateful members like
    the connection pool and cache.</p>
</li>
<li>
<p><strong>Get and Set prefixes are now avoided.</strong> With ubiquitous builders
    throughout OkHttp these accessor prefixes aren&rsquo;t necessary. Previously
    OkHttp used <em>get</em> and <em>set</em> prefixes sporadically which make the API
    inconsistent and awkward to explore.</p>
</li>
<li>
<p><strong>OkHttpClient now implements the new <code>Call.Factory</code> interface.</strong> This
    interface will make your code easier to test. When you test code that makes
    HTTP requests, you can use this interface to replace the real <code>OkHttpClient</code>
    with your own mocks or fakes.</p>
<p>The interface will also let you use OkHttp&rsquo;s API with another HTTP client&rsquo;s
implementation. This is useful in sandboxed environments like Google App
Engine.</p>
</li>
<li>
<p><strong>OkHttp now does cookies.</strong> We&rsquo;ve replaced <code>java.net.CookieHandler</code> with
    a new interface, <code>CookieJar</code> and added our own <code>Cookie</code> model class. This
    new cookie follows the latest RFC and supports the same cookie attributes
    as modern web browsers.</p>
</li>
<li>
<p><strong>Form and Multipart bodies are now modeled.</strong> We&rsquo;ve replaced the opaque
    <code>FormEncodingBuilder</code> with the more powerful <code>FormBody</code> and
    <code>FormBody.Builder</code> combo. Similarly we&rsquo;ve upgraded <code>MultipartBuilder</code> into
    <code>MultipartBody</code>, <code>MultipartBody.Part</code>, and <code>MultipartBody.Builder</code>.</p>
</li>
<li>
<p><strong>The Apache HTTP client and HttpURLConnection APIs are deprecated.</strong> They
    continue to work as they always have, but we&rsquo;re moving everything to the new
    OkHttp 3 API. The <code>okhttp-apache</code> and <code>okhttp-urlconnection</code> modules should
    be only be used to accelerate a transition to OkHttp&rsquo;s request/response API.
    These deprecated modules will be dropped in an upcoming OkHttp 3.x release.</p>
</li>
<li>
<p><strong>Canceling batches of calls is now the application&rsquo;s responsibility.</strong>
    The API to cancel calls by tag has been removed and replaced with a more
    general mechanism. The dispatcher now exposes all in-flight calls via its
    <code>runningCalls()</code> and <code>queuedCalls()</code> methods. You can write code that
    selects calls by tag, host, or whatever, and invokes <code>Call.cancel()</code> on the
    ones that are no longer necessary.</p>
</li>
<li>
<p><strong>OkHttp no longer uses the global <code>java.net.Authenticator</code> by default.</strong>
    We&rsquo;ve changed our <code>Authenticator</code> interface to authenticate web and proxy
    authentication failures through a single method. An adapter for the old
    authenticator is available in the <code>okhttp-urlconnection</code> module.</p>
</li>
<li>
<p>Fix: Don&rsquo;t throw <code>IOException</code> on <code>ResponseBody.contentLength()</code> or <code>close()</code>.</p>
</li>
<li>Fix: Never throw converting an <code>HttpUrl</code> to a <code>java.net.URI</code>. This changes
    the <code>uri()</code> method to handle malformed percent-escapes and characters
    forbidden by <code>URI</code>.</li>
<li>Fix: When a connect times out, attempt an alternate route. Previously route
    selection was less efficient when differentiating failures.</li>
<li>New: <code>Response.peekBody()</code> lets you access the response body without
    consuming it. This may be handy for interceptors!</li>
<li>New: <code>HttpUrl.newBuilder()</code> resolves a link to a builder.</li>
<li>New: Add the TLS version to the <code>Handshake</code>.</li>
<li>New: Drop <code>Request.uri()</code> and <code>Request#urlString()</code>. Just use
    <code>Request.url().uri()</code> and <code>Request.url().toString()</code>.</li>
<li>New: Add URL to HTTP response logging.</li>
<li>New: Make <code>HttpUrl</code> the blessed URL method of <code>Request</code>.</li>
</ul>
<h2 id="version-275">Version 2.7.5<a class="headerlink" href="#version-275" title="Permanent link">&para;</a></h2>
<p><em>2016-02-25</em></p>
<ul>
<li>Fix: Change the certificate pinner to always build full chains. This
    prevents a potential crash when using certificate pinning with the Google
    Play Services security provider.</li>
</ul>
<h2 id="version-274">Version 2.7.4<a class="headerlink" href="#version-274" title="Permanent link">&para;</a></h2>
<p><em>2016-02-07</em></p>
<ul>
<li>Fix: Don&rsquo;t crash when finding the trust manager if the Play Services (GMS)
    security provider is installed.</li>
<li>Fix: The previous release introduced a performance regression on Android,
    caused by looking up CA certificates. This is now fixed.</li>
</ul>
<h2 id="version-273">Version 2.7.3<a class="headerlink" href="#version-273" title="Permanent link">&para;</a></h2>
<p><em>2016-02-06</em></p>
<ul>
<li>Fix: Permit the trusted CA root to be pinned by <code>CertificatePinner</code>.</li>
</ul>
<h2 id="version-272">Version 2.7.2<a class="headerlink" href="#version-272" title="Permanent link">&para;</a></h2>
<p><em>2016-01-07</em></p>
<ul>
<li>Fix: Don&rsquo;t eagerly release stream allocations on cache hits. We might still
    need them to handle redirects.</li>
</ul>
<h2 id="version-271">Version 2.7.1<a class="headerlink" href="#version-271" title="Permanent link">&para;</a></h2>
<p><em>2016-01-01</em></p>
<ul>
<li>Fix: Don&rsquo;t do a health check on newly-created connections. This is
    unnecessary work that could put the client in an inconsistent state if the
    health check fails.</li>
</ul>
<h2 id="version-270">Version 2.7.0<a class="headerlink" href="#version-270" title="Permanent link">&para;</a></h2>
<p><em>2015-12-13</em></p>
<ul>
<li><strong>Rewritten connection management.</strong> Previously OkHttp&rsquo;s connection pool
    managed both idle and active connections for HTTP/2, but only idle
    connections for HTTP/1.x. With this update the connection pool manages both
    idle and active connections for everything. OkHttp now detects and warns on
    connections that were allocated but never released, and will enforce HTTP/2
    stream limits. This update also fixes <code>Call.cancel()</code> to not do I/O on the
    calling thread.</li>
<li>Fix: Don&rsquo;t log gzipped data in the logging interceptor.</li>
<li>Fix: Don&rsquo;t resolve DNS addresses when connecting through a SOCKS proxy.</li>
<li>Fix: Drop the synthetic <code>OkHttp-Selected-Protocol</code> response header.</li>
<li>Fix: Support 204 and 205 &lsquo;No Content&rsquo; replies in the logging interceptor.</li>
<li>New: Add <code>Call.isExecuted()</code>.</li>
</ul>
<h2 id="version-260">Version 2.6.0<a class="headerlink" href="#version-260" title="Permanent link">&para;</a></h2>
<p><em>2015-11-22</em></p>
<ul>
<li>
<p><strong>New Logging Interceptor.</strong> The <code>logging-interceptor</code> subproject offers
    simple request and response logging. It may be configured to log headers and
    bodies for debugging. It requires this Maven dependency:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.squareup.okhttp<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>logging-interceptor<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>2.6.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

<p>Configure basic logging like this:</p>
<div class="codehilite"><pre><span></span><span class="n">HttpLoggingInterceptor</span> <span class="n">loggingInterceptor</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HttpLoggingInterceptor</span><span class="o">();</span>
<span class="n">loggingInterceptor</span><span class="o">.</span><span class="na">setLevel</span><span class="o">(</span><span class="n">HttpLoggingInterceptor</span><span class="o">.</span><span class="na">Level</span><span class="o">.</span><span class="na">BASIC</span><span class="o">);</span>
<span class="n">client</span><span class="o">.</span><span class="na">networkInterceptors</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="n">loggingInterceptor</span><span class="o">);</span>
</pre></div>

<p><strong>Warning:</strong> Avoid <code>Level.HEADERS</code> and <code>Level.BODY</code> in production because
they could leak passwords and other authentication credentials to insecure
logs.</p>
</li>
<li>
<p><strong>WebSocket API now uses <code>RequestBody</code> and <code>ResponseBody</code> for messages.</strong>
    This is a backwards-incompatible API change.</p>
</li>
<li>
<p><strong>The DNS service is now pluggable.</strong> In some situations this may be useful
    to manually prioritize specific IP addresses.</p>
</li>
<li>
<p>Fix: Don&rsquo;t throw when converting an <code>HttpUrl</code> to a <code>java.net.URI</code>.
    Previously URLs with special characters like <code>|</code> and <code>[</code> would break when
    subjected to URI’s overly-strict validation.</p>
</li>
<li>Fix: Don&rsquo;t re-encode <code>+</code> as <code>%20</code> in encoded URL query strings. OkHttp
    prefers <code>%20</code> when doing its own encoding, but will retain <code>+</code> when that is
    provided.</li>
<li>Fix: Enforce that callers call <code>WebSocket.close()</code> on IO errors. Error
    handling in WebSockets is significantly improved.</li>
<li>Fix: Don&rsquo;t use SPDY/3 style header concatenation for HTTP/2 request headers.
    This could have corrupted requests where multiple headers had the same name,
    as in cookies.</li>
<li>Fix: Reject bad characters in the URL hostname. Previously characters like
    <code>\0</code> would cause a late crash when building the request.</li>
<li>Fix: Allow interceptors to change the request method.</li>
<li>Fix: Don’t use the request&rsquo;s <code>User-Agent</code> or <code>Proxy-Authorization</code> when
    connecting to an HTTPS server via an HTTP tunnel. The <code>Proxy-Authorization</code>
    header was being leaked to the origin server.</li>
<li>Fix: Digits may be used in a URL scheme.</li>
<li>Fix: Improve connection timeout recovery.</li>
<li>Fix: Recover from <code>getsockname</code> crashes impacting Android releases prior to
    4.2.2.</li>
<li>Fix: Drop partial support for HTTP/1.0. Previously OkHttp would send
    <code>HTTP/1.0</code> on connections after seeing a response with <code>HTTP/1.0</code>. The fixed
    behavior is consistent with Firefox and Chrome.</li>
<li>Fix: Allow a body in <code>OPTIONS</code> requests.</li>
<li>Fix: Don&rsquo;t percent-encode non-ASCII characters in URL fragments.</li>
<li>Fix: Handle null fragments.</li>
<li>Fix: Don’t crash on interceptors that throw <code>IOException</code> before a
    connection is attempted.</li>
<li>New: Support <a href="https://tools.ietf.org/html/rfc4918">WebDAV</a> HTTP methods.</li>
<li>New: Buffer WebSocket frames for better performance.</li>
<li>New: Drop support for <code>TLS_DHE_DSS_WITH_AES_128_CBC_SHA</code>, our only remaining
    DSS cipher suite. This is consistent with Firefox and Chrome which have also
    dropped these cipher suite.</li>
</ul>
<h2 id="version-250">Version 2.5.0<a class="headerlink" href="#version-250" title="Permanent link">&para;</a></h2>
<p><em>2015-08-25</em></p>
<ul>
<li>
<p><strong>Timeouts now default to 10 seconds.</strong> Previously we defaulted to never
    timing out, and that was a lousy policy. If establishing a connection,
    reading the next byte from a connection, or writing the next byte to a
    connection takes more than 10 seconds to complete, you’ll need to adjust
    the timeouts manually.</p>
</li>
<li>
<p><strong>OkHttp now rejects request headers that contain invalid characters.</strong> This
    includes potential security problems (newline characters) as well as simple
    non-ASCII characters (including international characters and emoji).</p>
</li>
<li>
<p><strong>Call canceling is more reliable.</strong>  We had a bug where a socket being
     connected wasn&rsquo;t being closed when the application used <code>Call.cancel()</code>.</p>
</li>
<li>
<p><strong>Changing a HttpUrl’s scheme now tracks the default port.</strong> We had a bug
    where changing a URL from <code>http</code> to <code>https</code> would leave it on port 80.</p>
</li>
<li>
<p><strong>Okio has been updated to 1.6.0.</strong>
     <div class="codehilite"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.squareup.okio<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>okio<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.6.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div></p>
</li>
<li>
<p>New: <code>Cache.initialize()</code>. Call this on a background thread to eagerly
    initialize the response cache.</p>
</li>
<li>New: Fold <code>MockWebServerRule</code> into <code>MockWebServer</code>. This makes it easier to
    write JUnit tests with <code>MockWebServer</code>. The <code>MockWebServer</code> library now
    depends on JUnit, though it continues to work with all testing frameworks.</li>
<li>Fix: <code>FormEncodingBuilder</code> is now consistent with browsers in which
    characters it escapes. Previously we weren’t percent-encoding commas,
    parens, and other characters.</li>
<li>Fix: Relax <code>FormEncodingBuilder</code> to support building empty forms.</li>
<li>Fix: Timeouts throw <code>SocketTimeoutException</code>, not <code>InterruptedIOException</code>.</li>
<li>Fix: Change <code>MockWebServer</code> to use the same logic as OkHttp when determining
    whether an HTTP request permits a body.</li>
<li>Fix: <code>HttpUrl</code> now uses the canonical form for IPv6 addresses.</li>
<li>Fix: Use <code>HttpUrl</code> internally.</li>
<li>Fix: Recover from Android 4.2.2 EBADF crashes.</li>
<li>Fix: Don&rsquo;t crash with an <code>IllegalStateException</code> if an HTTP/2 or SPDY
    write fails, leaving the connection in an inconsistent state.</li>
<li>Fix: Make sure the default user agent is ASCII.</li>
</ul>
<h2 id="version-240">Version 2.4.0<a class="headerlink" href="#version-240" title="Permanent link">&para;</a></h2>
<p><em>2015-05-22</em></p>
<ul>
<li>
<p><strong>Forbid response bodies on HTTP 204 and 205 responses.</strong> Webservers that
    return such malformed responses will now trigger a <code>ProtocolException</code> in
    the client.</p>
</li>
<li>
<p><strong>WebSocketListener has incompatible changes.</strong> The <code>onOpen()</code> method is now
    called on the reader thread, so implementations must return before further
    websocket messages will be delivered. The <code>onFailure()</code> method now includes
    an HTTP response if one was returned.</p>
</li>
</ul>
<h2 id="version-240-rc1">Version 2.4.0-RC1<a class="headerlink" href="#version-240-rc1" title="Permanent link">&para;</a></h2>
<p><em>2015-05-16</em></p>
<ul>
<li>
<p><strong>New HttpUrl API.</strong> It&rsquo;s like <code>java.net.URL</code> but good. Note that
    <code>Request.Builder.url()</code> now throws <code>IllegalArgumentException</code> on malformed
    URLs. (Previous releases would throw a <code>MalformedURLException</code> when calling
    a malformed URL.)</p>
</li>
<li>
<p><strong>We&rsquo;ve improved connect failure recovery.</strong> We now differentiate between
    setup, connecting, and connected and implement appropriate recovery rules
    for each. This changes <code>Address</code> to no longer use <code>ConnectionSpec</code>. (This is
    an incompatible API change).</p>
</li>
<li>
<p><strong><code>FormEncodingBuilder</code> now uses <code>%20</code> instead of <code>+</code> for encoded spaces.</strong>
    Both are permitted-by-spec, but <code>%20</code> requires fewer special cases.</p>
</li>
<li>
<p><strong>Okio has been updated to 1.4.0.</strong>
     <div class="codehilite"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.squareup.okio<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>okio<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.4.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div></p>
</li>
<li>
<p><strong><code>Request.Builder</code> no longer accepts null if a request body is required.</strong>
    Passing null will now fail for request methods that require a body. Instead
    use an empty body such as this one:</p>
<div class="codehilite"><pre><span></span>    <span class="n">RequestBody</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
</pre></div>

</li>
<li>
<p><strong><code>CertificatePinner</code> now supports wildcard hostnames.</strong> As always with
   certificate pinning, you must be very careful to avoid <a href="https://noncombatant.org/2015/05/01/about-http-public-key-pinning/">bricking</a>
   your app. You&rsquo;ll need to pin both the top-level domain and the <code>*.</code> domain
   for full coverage.</p>
<div class="codehilite"><pre><span></span> <span class="n">client</span><span class="o">.</span><span class="na">setCertificatePinner</span><span class="o">(</span><span class="k">new</span> <span class="n">CertificatePinner</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
     <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;publicobject.com&quot;</span><span class="o">,</span>   <span class="s">&quot;sha1/DmxUShsZuNiqPQsX2Oi9uv2sCnw=&quot;</span><span class="o">)</span>
     <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;*.publicobject.com&quot;</span><span class="o">,</span> <span class="s">&quot;sha1/DmxUShsZuNiqPQsX2Oi9uv2sCnw=&quot;</span><span class="o">)</span>
     <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;publicobject.com&quot;</span><span class="o">,</span>   <span class="s">&quot;sha1/SXxoaOSEzPC6BgGmxAt/EAcsajw=&quot;</span><span class="o">)</span>
     <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;*.publicobject.com&quot;</span><span class="o">,</span> <span class="s">&quot;sha1/SXxoaOSEzPC6BgGmxAt/EAcsajw=&quot;</span><span class="o">)</span>
     <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;publicobject.com&quot;</span><span class="o">,</span>   <span class="s">&quot;sha1/blhOM3W9V/bVQhsWAcLYwPU6n24=&quot;</span><span class="o">)</span>
     <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;*.publicobject.com&quot;</span><span class="o">,</span> <span class="s">&quot;sha1/blhOM3W9V/bVQhsWAcLYwPU6n24=&quot;</span><span class="o">)</span>
     <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;publicobject.com&quot;</span><span class="o">,</span>   <span class="s">&quot;sha1/T5x9IXmcrQ7YuQxXnxoCmeeQ84c=&quot;</span><span class="o">)</span>
     <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;*.publicobject.com&quot;</span><span class="o">,</span> <span class="s">&quot;sha1/T5x9IXmcrQ7YuQxXnxoCmeeQ84c=&quot;</span><span class="o">)</span>
     <span class="o">.</span><span class="na">build</span><span class="o">());</span>
</pre></div>

</li>
<li>
<p><strong>Interceptors lists are now deep-copied by <code>OkHttpClient.clone()</code>.</strong>
    Previously clones shared interceptors, which made it difficult to customize
    the interceptors on a request-by-request basis.</p>
</li>
<li>
<p>New: <code>Headers.toMultimap()</code>.</p>
</li>
<li>New: <code>RequestBody.create(MediaType, ByteString)</code>.</li>
<li>New: <code>ConnectionSpec.isCompatible(SSLSocket)</code>.</li>
<li>New: <code>Dispatcher.getQueuedCallCount()</code> and
    <code>Dispatcher.getRunningCallCount()</code>. These can be useful in diagnostics.</li>
<li>Fix: OkHttp no longer shares timeouts between pooled connections. This was
    causing some applications to crash when connections were reused.</li>
<li>Fix: <code>OkApacheClient</code> now allows an empty <code>PUT</code> and <code>POST</code>.</li>
<li>Fix: Websockets no longer rebuffer socket streams.</li>
<li>Fix: Websockets are now better at handling close frames.</li>
<li>Fix: Content type matching is now case insensitive.</li>
<li>Fix: <code>Vary</code> headers are not lost with <code>android.net.http.HttpResponseCache</code>.</li>
<li>Fix: HTTP/2 wasn&rsquo;t enforcing stream timeouts when writing the underlying
    connection. Now it is.</li>
<li>Fix: Never return null on <code>call.proceed()</code>. This was a bug in call
    cancelation.</li>
<li>Fix: When a network interceptor mutates a request, that change is now
    reflected in <code>Response.networkResponse()</code>.</li>
<li>Fix: Badly-behaving caches now throw a checked exception instead of a
    <code>NullPointerException</code>.</li>
<li>Fix: Better handling of uncaught exceptions in MockWebServer with HTTP/2.</li>
</ul>
<h2 id="version-230">Version 2.3.0<a class="headerlink" href="#version-230" title="Permanent link">&para;</a></h2>
<p><em>2015-03-16</em></p>
<ul>
<li>
<p><strong>HTTP/2 support.</strong> We&rsquo;ve done interop testing and haven&rsquo;t seen any
    problems. HTTP/2 support has been a big effort and we&rsquo;re particularly
    thankful to Adrian Cole who has helped us to reach this milestone.</p>
</li>
<li>
<p><strong>RC4 cipher suites are no longer supported by default.</strong> To connect to
    old, obsolete servers relying on these cipher suites, you must create a
    custom <code>ConnectionSpec</code>.</p>
</li>
<li>
<p><strong>Beta WebSockets support.</strong>. The <code>okhttp-ws</code> subproject offers a new
    websockets client. Please try it out! When it&rsquo;s ready we intend to include
    it with the core OkHttp library.</p>
</li>
<li>
<p><strong>Okio updated to 1.3.0.</strong></p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.squareup.okio<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>okio<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.3.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

</li>
<li>
<p><strong>Fix: improve parallelism of async requests.</strong> OkHttp&rsquo;s Dispatcher had a
    misconfigured <code>ExecutorService</code> that limited the number of worker threads.
    If you&rsquo;re using <code>Call.enqueue()</code> this update should significantly improve
    request concurrency.</p>
</li>
<li>
<p><strong>Fix: Lazily initialize the response cache.</strong> This avoids strict mode
    warnings when initializing OkHttp on Android‘s main thread.</p>
</li>
<li>
<p><strong>Fix: Disable ALPN on Android 4.4.</strong> That release of the feature was
    unstable and prone to native crashes in the underlying OpenSSL code.</p>
</li>
<li>Fix: Don&rsquo;t send both <code>If-None-Match</code> and <code>If-Modified-Since</code> cache headers
    when both are applicable.</li>
<li>Fix: Fail early when a port is out of range.</li>
<li>Fix: Offer <code>Content-Length</code> headers for multipart request bodies.</li>
<li>Fix: Throw <code>UnknownServiceException</code> if a cleartext connection is attempted
    when explicitly forbidden.</li>
<li>Fix: Throw a <code>SSLPeerUnverifiedException</code> when host verification fails.</li>
<li>Fix: MockWebServer explicitly closes sockets. (On some Android releases,
    closing the input stream and output stream of a socket is not sufficient.</li>
<li>Fix: Buffer outgoing HTTP/2 frames to limit how many outgoing frames are
    created.</li>
<li>Fix: Avoid crashing when cache writing fails due to a full disk.</li>
<li>Fix: Improve caching of private responses.</li>
<li>Fix: Update cache-by-default response codes.</li>
<li>Fix: Reused <code>Request.Builder</code> instances no longer hold stale URL fields.</li>
<li>New: ConnectionSpec can now be configured to use the SSL socket&rsquo;s default
    cipher suites. To use, set the cipher suites to <code>null</code>.</li>
<li>New: Support <code>DELETE</code> with a request body.</li>
<li>New: <code>Headers.of(Map)</code> creates headers from a Map.</li>
</ul>
<h2 id="version-220">Version 2.2.0<a class="headerlink" href="#version-220" title="Permanent link">&para;</a></h2>
<p><em>2014-12-30</em></p>
<ul>
<li>
<p><strong><code>RequestBody.contentLength()</code> now throws <code>IOException</code>.</strong>
    This is a source-incompatible change. If you have code that calls
    <code>RequestBody.contentLength()</code>, your compile will break with this
    update. The change is binary-compatible, however: code compiled
    for OkHttp 2.0 and 2.1 will continue to work with this update.</p>
</li>
<li>
<p><strong><code>COMPATIBLE_TLS</code> no longer supports SSLv3.</strong> In response to the
    <a href="https://googleonlinesecurity.blogspot.ca/2014/10/this-poodle-bites-exploiting-ssl-30.html">POODLE</a>
    vulnerability, OkHttp no longer offers SSLv3 when negotiation an
    HTTPS connection. If you continue to need to connect to webservers
    running SSLv3, you must manually configure your own <code>ConnectionSpec</code>.</p>
</li>
<li>
<p><strong>OkHttp now offers interceptors.</strong> Interceptors are a powerful mechanism
    that can monitor, rewrite, and retry calls. The <a href="http://square.github.io/okhttp/interceptors/">interceptors doc</a> is a full
    introduction to this new API.</p>
</li>
<li>
<p>New: APIs to iterate and selectively clear the response cache.</p>
</li>
<li>New: Support for SOCKS proxies.</li>
<li>New: Support for <code>TLS_FALLBACK_SCSV</code>.</li>
<li>New: Update HTTP/2 support to <code>h2-16</code> and <code>hpack-10</code>.</li>
<li>New: APIs to prevent retrying non-idempotent requests.</li>
<li>Fix: Drop NPN support. Going forward we support ALPN only.</li>
<li>Fix: The hostname verifier is now strict. This is consistent with the hostname
    verifier in modern browsers.</li>
<li>Fix: Improve <code>CONNECT</code> handling for misbehaving HTTP proxies.</li>
<li>Fix: Don&rsquo;t retry requests that failed due to timeouts.</li>
<li>Fix: Cache 302s and 308s that include appropriate response headers.</li>
<li>Fix: Improve pooling of connections that use proxy selectors.</li>
<li>Fix: Don&rsquo;t leak connections when using ALPN on the desktop.</li>
<li>Fix: Update Jetty ALPN to <code>7.1.2.v20141202</code> (Java 7) and <code>8.1.2.v20141202</code> (Java 8).
    This fixes a bug in resumed TLS sessions where the wrong protocol could be
    selected.</li>
<li>Fix: Don&rsquo;t crash in SPDY and HTTP/2 when disconnecting before connecting.</li>
<li>Fix: Avoid a reverse DNS-lookup for a numeric proxy address</li>
<li>Fix: Resurrect http/2 frame logging.</li>
<li>Fix: Limit to 20 authorization attempts.</li>
</ul>
<h2 id="version-210">Version 2.1.0<a class="headerlink" href="#version-210" title="Permanent link">&para;</a></h2>
<p><em>2014-11-11</em></p>
<ul>
<li>New: Typesafe APIs for interacting with cipher suites and TLS versions.</li>
<li>Fix: Don&rsquo;t crash when mixing authorization challenges with upload retries.</li>
</ul>
<h2 id="version-210-rc1">Version 2.1.0-RC1<a class="headerlink" href="#version-210-rc1" title="Permanent link">&para;</a></h2>
<p><em>2014-11-04</em></p>
<ul>
<li>
<p><strong>OkHttp now caches private responses</strong>. We&rsquo;ve changed from a shared cache
    to a private cache, and will now store responses that use an <code>Authorization</code>
    header. This means OkHttp&rsquo;s cache shouldn&rsquo;t be used on middleboxes that sit
    between user agents and the origin server.</p>
</li>
<li>
<p><strong>TLS configuration updated.</strong> OkHttp now explicitly enables TLSv1.2,
    TLSv1.1 and TLSv1.0 where they are supported. It will continue to perform
    only one fallback, to SSLv3. Applications can now configure this with the
    <code>ConnectionSpec</code> class.</p>
<p>To disable TLS fallback:</p>
<div class="codehilite"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="na">setConnectionSpecs</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span>
    <span class="n">ConnectionSpec</span><span class="o">.</span><span class="na">MODERN_TLS</span><span class="o">,</span> <span class="n">ConnectionSpec</span><span class="o">.</span><span class="na">CLEARTEXT</span><span class="o">));</span>
</pre></div>

<p>To disable cleartext connections, permitting <code>https</code> URLs only:</p>
<div class="codehilite"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="na">setConnectionSpecs</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span>
    <span class="n">ConnectionSpec</span><span class="o">.</span><span class="na">MODERN_TLS</span><span class="o">,</span> <span class="n">ConnectionSpec</span><span class="o">.</span><span class="na">COMPATIBLE_TLS</span><span class="o">));</span>
</pre></div>

</li>
<li>
<p><strong>New cipher suites.</strong> Please confirm that your webservers are reachable
    with this limited set of cipher suites.</p>
<div class="codehilite"><pre><span></span>                                         Android
Name                                     Version

TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256  5.0
TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256    5.0
TLS_DHE_RSA_WITH_AES_128_GCM_SHA256      5.0
TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA     4.0
TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA     4.0
TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA       4.0
TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA       4.0
TLS_ECDHE_ECDSA_WITH_RC4_128_SHA         4.0
TLS_ECDHE_RSA_WITH_RC4_128_SHA           4.0
TLS_DHE_RSA_WITH_AES_128_CBC_SHA         2.3
TLS_DHE_DSS_WITH_AES_128_CBC_SHA         2.3
TLS_DHE_RSA_WITH_AES_256_CBC_SHA         2.3
TLS_RSA_WITH_AES_128_GCM_SHA256          5.0
TLS_RSA_WITH_AES_128_CBC_SHA             2.3
TLS_RSA_WITH_AES_256_CBC_SHA             2.3
SSL_RSA_WITH_3DES_EDE_CBC_SHA            2.3  (Deprecated in 5.0)
SSL_RSA_WITH_RC4_128_SHA                 2.3
SSL_RSA_WITH_RC4_128_MD5                 2.3  (Deprecated in 5.0)
</pre></div>

</li>
<li>
<p><strong>Okio updated to 1.0.1.</strong></p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.squareup.okio<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>okio<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0.1<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

</li>
<li>
<p><strong>New APIs to permit easy certificate pinning.</strong> Be warned, certificate
    pinning is dangerous and could prevent your application from trusting your
    server!</p>
</li>
<li>
<p><strong>Cache improvements.</strong> This release fixes some severe cache problems
    including a bug where the cache could be corrupted upon certain access
    patterns. We also fixed a bug where the cache was being cleared due to a
    corrupted journal. We&rsquo;ve added APIs to configure a request&rsquo;s <code>Cache-Control</code>
    headers, and to manually clear the cache.</p>
</li>
<li>
<p><strong>Request cancellation fixes.</strong> This update fixes a bug where synchronous
    requests couldn&rsquo;t be canceled by tag. This update avoids crashing when
    <code>onResponse()</code> throws an <code>IOException</code>. That failure will now be logged
    instead of notifying the thread&rsquo;s uncaught exception handler. We&rsquo;ve added a
    new API, <code>Call.isCanceled()</code> to check if a call has been canceled.</p>
</li>
<li>
<p>New: Update <code>MultipartBuilder</code> to support content length.</p>
</li>
<li>New: Make it possible to mock <code>OkHttpClient</code> and <code>Call</code>.</li>
<li>New: Update to h2-14 and hpack-9.</li>
<li>New: OkHttp includes a user-agent by default, like <code>okhttp/2.1.0-RC1</code>.</li>
<li>Fix: Handle response code <code>308 Permanent Redirect</code>.</li>
<li>Fix: Don&rsquo;t skip the callback if a call is canceled.</li>
<li>Fix: Permit hostnames with underscores.</li>
<li>Fix: Permit overriding the content-type in <code>OkApacheClient</code>.</li>
<li>Fix: Use the socket factory for direct connections.</li>
<li>Fix: Honor <code>OkUrlFactory</code> APIs that disable redirects.</li>
<li>Fix: Don&rsquo;t crash on concurrent modification of <code>SPDY</code> SPDY settings.</li>
</ul>
<h2 id="version-200">Version 2.0.0<a class="headerlink" href="#version-200" title="Permanent link">&para;</a></h2>
<p>This release commits to a stable 2.0 API. Read the 2.0.0-RC1 changes for advice
on upgrading from 1.x to 2.x.</p>
<p><em>2014-06-21</em></p>
<ul>
<li><strong>API Change</strong>: Use <code>IOException</code> in <code>Callback.onFailure()</code>. This is
    a source-incompatible change, and is different from OkHttp 2.0.0-RC2 which
    used <code>Throwable</code>.</li>
<li>Fix: Fixed a caching bug where we weren&rsquo;t storing rewritten request headers
    like <code>Accept-Encoding</code>.</li>
<li>Fix: Fixed bugs in handling the SPDY window size. This was stalling certain
    large downloads</li>
<li>Update the language level to Java 7. (OkHttp requires Android 2.3+ or Java 7+.)</li>
</ul>
<h2 id="version-200-rc2">Version 2.0.0-RC2<a class="headerlink" href="#version-200-rc2" title="Permanent link">&para;</a></h2>
<p><em>2014-06-11</em></p>
<p>This update fixes problems in 2.0.0-RC1. Read the 2.0.0-RC1 changes for
advice on upgrading from 1.x to 2.x.</p>
<ul>
<li>Fix: Don&rsquo;t leak connections! There was a regression in 2.0.0-RC1 where
    connections were neither closed nor pooled.</li>
<li>Fix: Revert builder-style return types from OkHttpClient&rsquo;s timeout methods
    for binary compatibility with OkHttp 1.x.</li>
<li>Fix: Don&rsquo;t skip client stream 1 on SPDY/3.1. This fixes SPDY connectivity to
    <code>https://google.com</code>, which doesn&rsquo;t follow the SPDY/3.1 spec!</li>
<li>Fix: Always configure NPN headers. This fixes connectivity to
    <code>https://facebook.com</code> when SPDY and HTTP/2 are both disabled. Otherwise an
    unexpected NPN response is received and OkHttp crashes.</li>
<li>Fix: Write continuation frames when HPACK data is larger than 16383 bytes.</li>
<li>Fix: Don&rsquo;t drop uncaught exceptions thrown in async calls.</li>
<li>Fix: Throw an exception eagerly when a request body is not legal. Previously
    we ignored the problem at request-building time, only to crash later with a
    <code>NullPointerException</code>.</li>
<li>Fix: Include a backwards-compatible <code>OkHttp-Response-Source</code> header with
    <code>OkUrlFactory</code>responses.</li>
<li>Fix: Don&rsquo;t include a default User-Agent header in requests made with the Call
    API. Requests made with OkUrlFactory will continue to have a default user
    agent.</li>
<li>
<p>New: Guava-like API to create headers:</p>
<div class="codehilite"><pre><span></span><span class="n">Headers</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">Headers</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">name1</span><span class="o">,</span> <span class="n">value1</span><span class="o">,</span> <span class="n">name2</span><span class="o">,</span> <span class="n">value2</span><span class="o">,</span> <span class="o">...).</span>
</pre></div>

</li>
<li>
<p>New: Make the content-type header optional for request bodies.</p>
</li>
<li>New: <code>Response.isSuccessful()</code> is a convenient API to check response codes.</li>
<li>New: The response body can now be read outside of the callback. Response
    bodies must always be closed, otherwise they will leak connections!</li>
<li>New: APIs to create multipart request bodies (<code>MultipartBuilder</code>) and form
    encoding bodies (<code>FormEncodingBuilder</code>).</li>
</ul>
<h2 id="version-200-rc1">Version 2.0.0-RC1<a class="headerlink" href="#version-200-rc1" title="Permanent link">&para;</a></h2>
<p><em>2014-05-23</em></p>
<p>OkHttp 2 is designed around a new API that is true to HTTP, with classes for
requests, responses, headers, and calls. It uses modern Java patterns like
immutability and chained builders. The API now offers asynchronous callbacks
in addition to synchronous blocking calls.</p>
<h4 id="api-changes">API Changes<a class="headerlink" href="#api-changes" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p><strong>New Request and Response types,</strong> each with their own builder. There&rsquo;s also
    a <code>RequestBody</code> class to write the request body to the network and a
    <code>ResponseBody</code> to read the response body from the network. The standalone
    <code>Headers</code> class offers full access to the HTTP headers.</p>
</li>
<li>
<p><strong>Okio dependency added.</strong> OkHttp now depends on
    <a href="https://github.com/square/okio">Okio</a>, an I/O library that makes it easier
    to access, store and process data. Using this library internally makes OkHttp
    faster while consuming less memory. You can write a <code>RequestBody</code> as an Okio
    <code>BufferedSink</code> and a <code>ResponseBody</code> as an Okio <code>BufferedSource</code>. Standard
    <code>InputStream</code> and <code>OutputStream</code> access is also available.</p>
</li>
<li>
<p><strong>New Call and Callback types</strong> execute requests and receive their
    responses. Both types of calls can be canceled via the <code>Call</code> or the
    <code>OkHttpClient</code>.</p>
</li>
<li>
<p><strong>URLConnection support has moved to the okhttp-urlconnection module.</strong>
    If you&rsquo;re upgrading from 1.x, this change will impact you. You will need to
    add the <code>okhttp-urlconnection</code> module to your project and use the
    <code>OkUrlFactory</code> to create new instances of <code>HttpURLConnection</code>:</p>
<div class="codehilite"><pre><span></span><span class="c1">// OkHttp 1.x:</span>
<span class="n">HttpURLConnection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">open</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>

<span class="c1">// OkHttp 2.x:</span>
<span class="n">HttpURLConnection</span> <span class="n">connection</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OkUrlFactory</span><span class="o">(</span><span class="n">client</span><span class="o">).</span><span class="na">open</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
</pre></div>

</li>
<li>
<p><strong>Custom caches are no longer supported.</strong> In OkHttp 1.x it was possible to
    define your own response cache with the <code>java.net.ResponseCache</code> and OkHttp&rsquo;s
    <code>OkResponseCache</code> interfaces. Both of these APIs have been dropped. In
    OkHttp 2 the built-in disk cache is the only supported response cache.</p>
</li>
<li>
<p><strong>HttpResponseCache has been renamed to Cache.</strong> Install it with
    <code>OkHttpClient.setCache(...)</code> instead of <code>OkHttpClient.setResponseCache(...)</code>.</p>
</li>
<li>
<p><strong>OkAuthenticator has been replaced with Authenticator.</strong> This new
    authenticator has access to the full incoming response and can respond with
    whichever followup request is appropriate. The <code>Challenge</code> class is now a
    top-level class and <code>Credential</code> is replaced with a utility class called
    <code>Credentials</code>.</p>
</li>
<li>
<p><strong>OkHttpClient.getFollowProtocolRedirects() renamed to
    getFollowSslRedirects()</strong>. We reserve the word <em>protocol</em> for the HTTP
    version being used (HTTP/1.1, HTTP/2). The old name of this method was
    misleading; it was always used to configure redirects between <code>https://</code> and
    <code>http://</code> schemes.</p>
</li>
<li>
<p><strong>RouteDatabase is no longer public API.</strong> OkHttp continues to track which
    routes have failed but this is no exposed in the API.</p>
</li>
<li>
<p><strong>ResponseSource is gone.</strong> This enum exposed whether a response came from
    the cache, network, or both. OkHttp 2 offers more detail with raw access to
    the cache and network responses in the new <code>Response</code> class.</p>
</li>
<li>
<p><strong>TunnelRequest is gone.</strong> It specified how to connect to an HTTP proxy.
    OkHttp 2 uses the new <code>Request</code> class for this.</p>
</li>
<li>
<p><strong>Dispatcher</strong> is a new class that manages the queue of asynchronous calls. It
    implements limits on total in-flight calls and in-flight calls per host.</p>
</li>
</ul>
<h4 id="implementation-changes">Implementation changes<a class="headerlink" href="#implementation-changes" title="Permanent link">&para;</a></h4>
<ul>
<li>Support Android <code>TrafficStats</code> socket tagging.</li>
<li>Drop authentication headers on redirect.</li>
<li>Added support for compressed data frames.</li>
<li>Process push promise callbacks in order.</li>
<li>Update to http/2 draft 12.</li>
<li>Update to HPACK draft 07.</li>
<li>Add ALPN support. Maven will use ALPN on OpenJDK 8.</li>
<li>Update NPN dependency to target <code>jdk7u60-b13</code> and <code>Oracle jdk7u55-b13</code>.</li>
<li>Ensure SPDY variants support zero-length DELETE and POST.</li>
<li>Prevent leaking a cache item&rsquo;s InputStreams when metadata read fails.</li>
<li>Use a string to identify TLS versions in routes.</li>
<li>Add frame logger for HTTP/2.</li>
<li>Replacing <code>httpMinorVersion</code> with <code>Protocol</code>. Expose HTTP/1.0 as a potential protocol.</li>
<li>Use <code>Protocol</code> to describe framing.</li>
<li>Implement write timeouts for HTTP/1.1 streams.</li>
<li>Avoid use of SPDY stream ID 1, as that&rsquo;s typically used for UPGRADE.</li>
<li>Support OAuth in <code>Authenticator</code>.</li>
<li>Permit a dangling semicolon in media type parsing.</li>
</ul>
<h2 id="version-160">Version 1.6.0<a class="headerlink" href="#version-160" title="Permanent link">&para;</a></h2>
<p><em>2014-05-23</em></p>
<ul>
<li>Offer bridges to make it easier to migrate from OkHttp 1.x to OkHttp 2.0.
   This adds <code>OkUrlFactory</code>, <code>Cache</code>, and <code>@Deprecated</code> annotations for APIs
   dropped in 2.0.</li>
</ul>
<h2 id="version-154">Version 1.5.4<a class="headerlink" href="#version-154" title="Permanent link">&para;</a></h2>
<p><em>2014-04-14</em></p>
<ul>
<li>Drop ALPN support in Android. There&rsquo;s a concurrency bug in all
   currently-shipping versions.</li>
<li>Support asynchronous disconnects by breaking the socket only. This should
   prevent flakiness from multiple threads concurrently accessing a stream.</li>
</ul>
<h2 id="version-153">Version 1.5.3<a class="headerlink" href="#version-153" title="Permanent link">&para;</a></h2>
<p><em>2014-03-29</em></p>
<ul>
<li>Fix bug where the Content-Length header was not always dropped when
   following a redirect from a POST to a GET.</li>
<li>Implement basic support for <code>Thread.interrupt()</code>. OkHttp now checks
   for an interruption before doing a blocking call. If it is interrupted,
   it throws an <code>InterruptedIOException</code>.</li>
</ul>
<h2 id="version-152">Version 1.5.2<a class="headerlink" href="#version-152" title="Permanent link">&para;</a></h2>
<p><em>2014-03-17</em></p>
<ul>
<li>Fix bug where deleting a file that was absent from the <code>HttpResponseCache</code>
   caused an IOException.</li>
<li>Fix bug in HTTP/2 where our HPACK decoder wasn&rsquo;t emitting entries in
   certain eviction scenarios, leading to dropped response headers.</li>
</ul>
<h2 id="version-151">Version 1.5.1<a class="headerlink" href="#version-151" title="Permanent link">&para;</a></h2>
<p><em>2014-03-11</em></p>
<ul>
<li>Fix 1.5.0 regression where connections should not have been recycled.</li>
<li>Fix 1.5.0 regression where transparent Gzip was broken by attempting to
   recover from another I/O failure.</li>
<li>Fix problems where spdy/3.1 headers may not have been compressed properly.</li>
<li>Fix problems with spdy/3.1 and http/2 where the wrong window size was being
   used.</li>
<li>Fix 1.5.0 regression where conditional cache responses could corrupt the
   connection pool.</li>
</ul>
<h2 id="version-150">Version 1.5.0<a class="headerlink" href="#version-150" title="Permanent link">&para;</a></h2>
<p><em>2014-03-07</em></p>
<h5 id="okhttp-no-longer-uses-the-default-ssl-context">OkHttp no longer uses the default SSL context.<a class="headerlink" href="#okhttp-no-longer-uses-the-default-ssl-context" title="Permanent link">&para;</a></h5>
<p>Applications that want to use the global SSL context with OkHttp should configure their
OkHttpClient instances with the following:</p>
<div class="codehilite"><pre><span></span><span class="n">okHttpClient</span><span class="o">.</span><span class="na">setSslSocketFactory</span><span class="o">(</span><span class="n">HttpsURLConnection</span><span class="o">.</span><span class="na">getDefaultSSLSocketFactory</span><span class="o">());</span>
</pre></div>

<p>A simpler solution is to avoid the shared default SSL socket factory. Instead, if you
need to customize SSL, do so for your specific OkHttpClient instance only.</p>
<h5 id="synthetic-headers-have-changed">Synthetic headers have changed<a class="headerlink" href="#synthetic-headers-have-changed" title="Permanent link">&para;</a></h5>
<p>Previously OkHttp added a synthetic response header, <code>OkHttp-Selected-Transport</code>. It
has been replaced with a new synthetic header, <code>OkHttp-Selected-Protocol</code>.</p>
<h5 id="changes">Changes<a class="headerlink" href="#changes" title="Permanent link">&para;</a></h5>
<ul>
<li>New: Support for <code>HTTP-draft-09/2.0</code>.</li>
<li>New: Support for <code>spdy/3.1</code>. Dropped support for <code>spdy/3</code>.</li>
<li>New: Use ALPN on Android platforms that support it (4.4+)</li>
<li>New: CacheControl model and parser.</li>
<li>New: Protocol selection in MockWebServer.</li>
<li>Fix: Route selection shouldn&rsquo;t use TLS modes that we know will fail.</li>
<li>Fix: Cache SPDY responses even if the response body is closed prematurely.</li>
<li>Fix: Use strict timeouts when aborting a download.</li>
<li>Fix: Support Shoutcast HTTP responses like <code>ICY 200 OK</code>.</li>
<li>Fix: Don&rsquo;t unzip if there isn&rsquo;t a response body.</li>
<li>Fix: Don&rsquo;t leak gzip streams on redirects.</li>
<li>Fix: Don&rsquo;t do DNS lookups on invalid hosts.</li>
<li>Fix: Exhaust the underlying stream when reading gzip streams.</li>
<li>Fix: Support the <code>PATCH</code> method.</li>
<li>Fix: Support request bodies on <code>DELETE</code> method.</li>
<li>Fix: Drop the <code>okhttp-protocols</code> module.</li>
<li>Internal: Replaced internal byte array buffers with pooled buffers (&ldquo;OkBuffer&rdquo;).</li>
</ul>
<h2 id="version-130">Version 1.3.0<a class="headerlink" href="#version-130" title="Permanent link">&para;</a></h2>
<p><em>2014-01-11</em></p>
<ul>
<li>New: Support for &ldquo;PATCH&rdquo; HTTP method in client and MockWebServer.</li>
<li>Fix: Drop <code>Content-Length</code> header when redirected from POST to GET.</li>
<li>Fix: Correctly read cached header entries with malformed header names.</li>
<li>Fix: Do not directly support any authentication schemes other than &ldquo;Basic&rdquo;.</li>
<li>Fix: Respect read timeouts on recycled connections.</li>
<li>Fix: Transmit multiple cookie values as a single header with delimiter.</li>
<li>Fix: Ensure <code>null</code> is never returned from a connection&rsquo;s <code>getHeaderFields()</code>.</li>
<li>Fix: Persist proper <code>Content-Encoding</code> header to cache for GZip responses.</li>
<li>Fix: Eliminate rare race condition in SPDY streams that would prevent connection reuse.</li>
<li>Fix: Change HTTP date formats to UTC to conform to RFC2616 section 3.3.</li>
<li>Fix: Support SPDY header blocks with trailing bytes.</li>
<li>Fix: Allow <code>;</code> as separator for <code>Cache-Control</code> header.</li>
<li>Fix: Correct bug where HTTPS POST requests were always automatically buffered.</li>
<li>Fix: Honor read timeout when parsing SPDY headers.</li>
</ul>
<h2 id="version-121">Version 1.2.1<a class="headerlink" href="#version-121" title="Permanent link">&para;</a></h2>
<p><em>2013-08-23</em></p>
<ul>
<li>Resolve issue with &lsquo;jar-with-dependencies&rsquo; artifact creation.</li>
<li>Fix: Support empty SPDY header values.</li>
</ul>
<h2 id="version-120">Version 1.2.0<a class="headerlink" href="#version-120" title="Permanent link">&para;</a></h2>
<p><em>2013-08-11</em></p>
<ul>
<li>New APIs on OkHttpClient to set default timeouts for connect and read.</li>
<li>Fix bug when caching SPDY responses.</li>
<li>Fix a bug with SPDY plus half-closed streams. (thanks kwuollett)</li>
<li>Fix a bug in <code>Content-Length</code> reporting for gzipped streams in the Apache
    HTTP client adapter. (thanks kwuollett)</li>
<li>Work around the Alcatel <code>getByInetAddress</code> bug (thanks k.kocel)</li>
<li>Be more aggressive about testing pooled sockets before reuse. (thanks
    warpspin)</li>
<li>Include <code>Content-Type</code> and <code>Content-Encoding</code> in the Apache HTTP client
    adapter. (thanks kwuollett)</li>
<li>Add a media type class to OkHttp.</li>
<li>
<p>Change custom header prefix:</p>
<p><div class="codehilite"><pre><span></span>X-Android-Sent-Millis is now OkHttp-Sent-Millis
X-Android-Received-Millis is now OkHttp-Received-Millis
X-Android-Response-Source is now OkHttp-Response-Source
X-Android-Selected-Transport is now OkHttp-Selected-Transport
</pre></div>
 *  Improve cache invalidation for POST-like requests.
 *  Bring MockWebServer into OkHttp and teach it SPDY.</p>
</li>
</ul>
<h2 id="version-111">Version 1.1.1<a class="headerlink" href="#version-111" title="Permanent link">&para;</a></h2>
<p><em>2013-06-23</em></p>
<ul>
<li>Fix: ClassCastException when caching responses that were redirected from
   HTTP to HTTPS.</li>
</ul>
<h2 id="version-110">Version 1.1.0<a class="headerlink" href="#version-110" title="Permanent link">&para;</a></h2>
<p><em>2013-06-15</em></p>
<ul>
<li>Fix: Connection reuse was broken for most HTTPS connections due to a bug in
   the way the hostname verifier was selected.</li>
<li>Fix: Locking bug in SpdyConnection.</li>
<li>Fix: Ignore null header values (for compatibility with HttpURLConnection).</li>
<li>Add URLStreamHandlerFactory support so that <code>URL.openConnection()</code> uses
   OkHttp.</li>
<li>Expose the transport (&ldquo;http/1.1&rdquo;, &ldquo;spdy/3&rdquo;, etc.) via magic request headers.
   Use <code>X-Android-Transports</code> to write the preferred transports and
   <code>X-Android-Selected-Transport</code> to read the negotiated transport.</li>
</ul>
<h2 id="version-102">Version 1.0.2<a class="headerlink" href="#version-102" title="Permanent link">&para;</a></h2>
<p><em>2013-05-11</em></p>
<ul>
<li>Fix: Remove use of Java 6-only APIs.</li>
<li>Fix: Properly handle exceptions from <code>NetworkInterface</code> when querying MTU.</li>
<li>Fix: Ensure MTU has a reasonable default and upper-bound.</li>
</ul>
<h2 id="version-101">Version 1.0.1<a class="headerlink" href="#version-101" title="Permanent link">&para;</a></h2>
<p><em>2013-05-06</em></p>
<ul>
<li>Correct casing of SSL in method names (<code>getSslSocketFactory</code>/<code>setSslSocketFactory</code>).</li>
</ul>
<h2 id="version-100">Version 1.0.0<a class="headerlink" href="#version-100" title="Permanent link">&para;</a></h2>
<p><em>2013-05-06</em></p>
<p>Initial release.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../4.x/mockwebserver/okhttp3.mockwebserver/" title="mockwebserver" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                mockwebserver
              </span>
            </div>
          </a>
        
        
          <a href="../upgrading_to_okhttp_4/" title="Upgrading to OkHttp 4" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Upgrading to OkHttp 4
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 Square, Inc.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>